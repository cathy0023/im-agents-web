# DataEyesç»„ä»¶æ¶æ„è®¾è®¡å›¾

## ğŸ—ï¸ ç»„ä»¶å±‚æ¬¡ç»“æ„

### å½“å‰æ¶æ„ (MessageLayout.tsx - case 2)
```
MessageLayout (agentType="dataeyes")
â””â”€â”€ getContentLayout() case 2:
    â””â”€â”€ div.flex-1.flex.flex-col.h-full
        â”œâ”€â”€ div.flex-1.overflow-hidden
        â”‚   â””â”€â”€ ChartArea (å…¨å±æ˜¾ç¤º)
        â””â”€â”€ FooterBar
            â”œâ”€â”€ mode="hr"
            â”œâ”€â”€ showInput={false}
            â””â”€â”€ showActions={false}
```

### é‡æ„åçš„æ–°æ¶æ„
```
DataEyesLayout (æ–°å»º)
â””â”€â”€ AdaptiveContainer (æ–°å»º)
    â”œâ”€â”€ é»˜è®¤æ¨¡å¼ (mode="chart-only")
    â”‚   â”œâ”€â”€ ChartArea (å…¨å±)
    â”‚   â””â”€â”€ ChatBubble (æµ®åŠ¨æ°”æ³¡)
    â”‚
    â””â”€â”€ èŠå¤©æ¨¡å¼ (mode="chat-active")
        â”œâ”€â”€ å·¦ä¾§åŒºåŸŸ (flex-1)
        â”‚   â”œâ”€â”€ ChatArea (èŠå¤©å¯¹è¯)
        â”‚   â””â”€â”€ ChatInputArea (æ¶ˆæ¯è¾“å…¥)
        â””â”€â”€ å³ä¾§åŒºåŸŸ (flex-1)
            â””â”€â”€ ChartArea (å›¾è¡¨æ•°æ®)
```

## ğŸ“ å¸ƒå±€ç»“æ„å¯¹æ¯”

### åŸå§‹å¸ƒå±€ (å½“å‰)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HeaderBar                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                   ChartArea                         â”‚
â”‚                  (100% å®½åº¦)                         â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   FooterBar                         â”‚
â”‚              (showInput=false)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é‡æ„åå¸ƒå±€1 - é»˜è®¤æ¨¡å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HeaderBar                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                   ChartArea                         â”‚
â”‚                  (100% å®½åº¦)                         â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚ â”‚ğŸ’¬ Chat   â”‚                                        â”‚
â”‚ â”‚ Bubble   â”‚                                        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é‡æ„åå¸ƒå±€2 - èŠå¤©æ¿€æ´»æ¨¡å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HeaderBar                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚                       â”‚
â”‚          ChatArea           â”‚      ChartArea        â”‚
â”‚       (èŠå¤©å¯¹è¯åŒº)           â”‚     (å›¾è¡¨æ•°æ®åŒº)       â”‚
â”‚                             â”‚                       â”‚
â”‚                             â”‚                       â”‚
â”‚                             â”‚                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚       ChatInputArea         â”‚                       â”‚
â”‚      (æ¶ˆæ¯è¾“å…¥æ¡†)            â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© ç»„ä»¶å¤ç”¨æ˜ å°„

### ç°æœ‰ç»„ä»¶ä¿æŒä¸å˜
```
âœ… ChartArea.tsx
   - åŠŸèƒ½: æ•°æ®å›¾è¡¨å±•ç¤º
   - ä¿®æ”¹: æ— éœ€ä¿®æ”¹
   - ä½ç½®: é»˜è®¤æ¨¡å¼å…¨å±ï¼ŒèŠå¤©æ¨¡å¼å³ä¾§50%

âœ… ChatArea.tsx  
   - åŠŸèƒ½: èŠå¤©å¯¹è¯æ˜¾ç¤º
   - ä¿®æ”¹: æ— éœ€ä¿®æ”¹
   - ä½ç½®: èŠå¤©æ¨¡å¼å·¦ä¾§ä¸Šéƒ¨åˆ†

âœ… MessageInput.tsx (ä»FooterBaræå–)
   - åŠŸèƒ½: æ¶ˆæ¯è¾“å…¥å¤„ç†
   - ä¿®æ”¹: æå–ä¸ºç‹¬ç«‹ç»„ä»¶
   - ä½ç½®: èŠå¤©æ¨¡å¼å·¦ä¾§ä¸‹éƒ¨åˆ†
```

### ç§»é™¤çš„ç»„ä»¶
```
âŒ FooterBar (åœ¨DataEyesé¡µé¢ä¸­)
   - åŸå› : å¿«æ·æ“ä½œåŠŸèƒ½åˆ é™¤ï¼Œè¾“å…¥åŠŸèƒ½è¿ç§»
   - æ›¿ä»£: ChatInputArea + ChatBubble
```

### æ–°å»ºç»„ä»¶
```
ğŸ†• ChatBubble.tsx
   - åŠŸèƒ½: æµ®åŠ¨èŠå¤©æ°”æ³¡
   - ä½ç½®: é»˜è®¤æ¨¡å¼å³ä¸‹è§’
   - äº¤äº’: ç‚¹å‡»æ¿€æ´»èŠå¤©æ¨¡å¼

ğŸ†• ChatInputArea.tsx
   - åŠŸèƒ½: èŠå¤©è¾“å…¥åŒºåŸŸå®¹å™¨
   - ç»„æˆ: MessageInput + æ ·å¼å®¹å™¨
   - ä½ç½®: èŠå¤©æ¨¡å¼å·¦ä¾§åº•éƒ¨

ğŸ†• AdaptiveContainer.tsx
   - åŠŸèƒ½: è‡ªé€‚åº”å¸ƒå±€å®¹å™¨
   - èŒè´£: ç®¡ç†å¸ƒå±€æ¨¡å¼åˆ‡æ¢å’ŒåŠ¨ç”»
   - å­ç»„ä»¶: ChatArea, ChartArea, ChatInputArea

ğŸ†• DataEyesLayout.tsx
   - åŠŸèƒ½: DataEyesé¡µé¢å¸ƒå±€å®¹å™¨
   - èŒè´£: çŠ¶æ€ç®¡ç†å’Œäº‹ä»¶å¤„ç†
   - æ›¿ä»£: MessageLayoutä¸­çš„case 2é€»è¾‘
```

## ğŸ”„ ç»„ä»¶æ•°æ®æµ

### çŠ¶æ€ç®¡ç†æµ
```
DataEyesLayout
    â†“ (chatConfigçŠ¶æ€)
AdaptiveContainer
    â†“ (mode props)
ChatBubble / ChatArea + ChartArea
    â†“ (äº‹ä»¶å›è°ƒ)
DataEyesLayout
    â†“ (æ›´æ–°chatStore)
å…¨å±€çŠ¶æ€æ›´æ–°
```

### äº‹ä»¶æµ
```
ç”¨æˆ·ç‚¹å‡»ChatBubble
    â†“
DataEyesLayout.handleChatToggle()
    â†“
chatStore.toggleDataEyesChat()
    â†“ 
AdaptiveContainer modeåˆ‡æ¢
    â†“
å¸ƒå±€åŠ¨ç”»æ‰§è¡Œ
    â†“
èŠå¤©æ¨¡å¼æ¿€æ´»
```

## ğŸ“± å“åº”å¼ç»„ä»¶ç»“æ„

### æ¡Œé¢ç«¯ (>1024px)
```
AdaptiveContainer
â”œâ”€â”€ ChatBubble (64x64px, å·¦ä¸‹è§’)
â”œâ”€â”€ é»˜è®¤æ¨¡å¼: ChartArea (100%å®½åº¦)
â””â”€â”€ èŠå¤©æ¨¡å¼: 
    â”œâ”€â”€ ChatArea (50%å®½åº¦)
    â”œâ”€â”€ ChatInputArea (50%å®½åº¦åº•éƒ¨)
    â””â”€â”€ ChartArea (50%å®½åº¦)
```

### å¹³æ¿ç«¯ (768px-1024px)
```
AdaptiveContainer  
â”œâ”€â”€ ChatBubble (56x56px, å·¦ä¸‹è§’)
â”œâ”€â”€ é»˜è®¤æ¨¡å¼: ChartArea (100%å®½åº¦)
â””â”€â”€ èŠå¤©æ¨¡å¼:
    â”œâ”€â”€ ChatArea (40%å®½åº¦)
    â”œâ”€â”€ ChatInputArea (40%å®½åº¦åº•éƒ¨)
    â””â”€â”€ ChartArea (60%å®½åº¦)
```

### ç§»åŠ¨ç«¯ (<768px)
```
AdaptiveContainer
â”œâ”€â”€ ChatBubble (48x48px, å·¦ä¸‹è§’)
â”œâ”€â”€ é»˜è®¤æ¨¡å¼: ChartArea (100%å®½åº¦)
â””â”€â”€ èŠå¤©æ¨¡å¼: (å…¨å±åˆ‡æ¢)
    â”œâ”€â”€ ChatArea (100%å®½åº¦è¦†ç›–)
    â”œâ”€â”€ ChatInputArea (100%å®½åº¦åº•éƒ¨)
    â””â”€â”€ [è¿”å›æŒ‰é’®] â†’ è¿”å›ChartArea
```

## ğŸ¯ è·¯ç”±é›†æˆæ–¹æ¡ˆ

### å½“å‰è·¯ç”±ç»“æ„ä¿æŒä¸å˜
```typescript
// App.tsx - è·¯ç”±ä¸å˜
<Route path="/messages/:agentType" element={<MessageLayout />} />

// MessageLayout.tsx - ä¿®æ”¹case 2
const getContentLayout = () => {
  switch(currentAgent.id) {
    case 2:
      // åŸæ¥çš„DataEyeså¸ƒå±€é€»è¾‘
      return (
        <div className="flex-1 flex flex-col h-full">
          <div className="flex-1 overflow-hidden">
            <ChartArea />
          </div>
          <FooterBar 
            mode="hr" 
            selectedAgent={currentAgent.id}
            showInput={false}
            showActions={false}
          />
        </div>
      )
      
      // æ›¿æ¢ä¸ºæ–°çš„DataEyeså¸ƒå±€
      return <DataEyesLayout agentId={currentAgent.id} />
  }
}
```

## ğŸ¨ æ ·å¼ç»§æ‰¿æ–¹æ¡ˆ

### ä¸»é¢˜å…¼å®¹æ€§ä¿è¯
```typescript
// æ‰€æœ‰æ–°ç»„ä»¶ä¸¥æ ¼éµå¾ªshadcnè¯­ä¹‰åŒ–é¢œè‰²
const componentStyles = {
  chatBubble: "bg-background text-foreground border-border hover:bg-accent",
  chatInputArea: "bg-background border-t border-border",
  adaptiveContainer: "bg-background text-foreground"
}

// ç»§æ‰¿ç°æœ‰ç»„ä»¶æ ·å¼
const existingStyles = {
  chartArea: "h-full bg-muted/30 p-4 border-l border-border", // ä¿æŒä¸å˜
  chatArea: "h-full bg-background flex flex-col",              // ä¿æŒä¸å˜
  messageInput: "...",                                         // æå–åä¿æŒä¸å˜
}
```

## ğŸ”§ å®ç°ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ç»„ä»¶ (å¿…é¡»å…ˆå®Œæˆ)
1. **ChatBubble** - å…¥å£äº¤äº’ç»„ä»¶
2. **ChatInputArea** - ä»FooterBaræå–MessageInput
3. **AdaptiveContainer** - æ ¸å¿ƒå¸ƒå±€ç®¡ç†å™¨

### ä¸­ä¼˜å…ˆçº§ç»„ä»¶
4. **DataEyesLayout** - ä¸»å®¹å™¨ç»„ä»¶
5. **å¸ƒå±€åˆ‡æ¢åŠ¨ç”»** - ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### ä½ä¼˜å…ˆçº§åŠŸèƒ½
6. **å“åº”å¼é€‚é…** - ç§»åŠ¨ç«¯ä¼˜åŒ–
7. **çŠ¶æ€æŒä¹…åŒ–** - ç”¨æˆ·åå¥½ä¿å­˜
8. **æ€§èƒ½ä¼˜åŒ–** - åŠ¨ç”»æ€§èƒ½è°ƒä¼˜

---

*æ­¤æ¶æ„å›¾ä¸ºå¼€å‘å›¢é˜Ÿæä¾›äº†æ¸…æ™°çš„ç»„ä»¶é‡æ„æ–¹å‘å’Œå®ç°ä¼˜å…ˆçº§ï¼Œç¡®ä¿åœ¨ä¸ç ´åç°æœ‰åŠŸèƒ½çš„å‰æä¸‹ï¼Œé¡ºåˆ©å®ç°DataEyeså¯é…ç½®èŠå¤©åŠŸèƒ½ã€‚*