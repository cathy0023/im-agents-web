# DataEyeså¸ƒå±€åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœè§„èŒƒ

## ğŸ¬ åŠ¨ç”»è®¾è®¡ç†å¿µ

### è®¾è®¡åŸåˆ™
1. **è‡ªç„¶æµç•…**: æ¨¡æ‹Ÿç‰©ç†ä¸–ç•Œçš„è¿åŠ¨è§„å¾‹ï¼Œé¿å…çªå…€çš„åˆ‡æ¢
2. **åŠŸèƒ½å¯¼å‘**: åŠ¨ç”»æœåŠ¡äºç”¨æˆ·ç†è§£å¸ƒå±€å˜åŒ–ï¼Œä¸æ˜¯è£…é¥°
3. **æ€§èƒ½ä¼˜å…ˆ**: ä¿è¯60fpsæµç•…åº¦ï¼Œé¿å…å½±å“æ•°æ®å±•ç¤ºæ€§èƒ½
4. **å¯è®¿é—®æ€§**: æ”¯æŒå‡å°‘åŠ¨ç”»åå¥½è®¾ç½®

### åŠ¨ç”»æ—¶é•¿æ ‡å‡†
```typescript
const ANIMATION_DURATIONS = {
  // å¿«é€Ÿåé¦ˆ - æŒ‰é’®ç‚¹å‡»ã€æ‚¬åœçŠ¶æ€
  instant: 100,   // 100ms
  fast: 200,      // 200ms
  
  // æ ‡å‡†è¿‡æ¸¡ - å¸ƒå±€åˆ‡æ¢ã€ç»„ä»¶è¿›å‡º
  normal: 300,    // 300ms
  
  // æ…¢é€Ÿè¿‡æ¸¡ - å¤æ‚å¸ƒå±€å˜åŒ–
  slow: 500,      // 500ms
  
  // å»¶è¿Ÿ - é”™å¼€åŠ¨ç”»æ—¶æœº
  delay: 100,     // 100ms
  stagger: 50,    // 50ms (å¤šå…ƒç´ ä¾æ¬¡åŠ¨ç”»)
}
```

## ğŸ”„ èŠå¤©æ°”æ³¡åŠ¨ç”»åºåˆ—

### 1. é»˜è®¤çŠ¶æ€åŠ¨ç”»
```css
/* æ°”æ³¡å…¥åœºåŠ¨ç”» */
@keyframes bubbleEnter {
  0% {
    transform: scale(0) translateY(20px);
    opacity: 0;
  }
  60% {
    transform: scale(1.1) translateY(-2px);
    opacity: 0.8;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* è„‰åŠ¨æç¤ºåŠ¨ç”» */
@keyframes bubblePulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(var(--primary), 0.4);
  }
  50% {
    transform: scale(1.02);
    box-shadow: 0 0 0 8px rgba(var(--primary), 0);
  }
}
```

### 2. æ‚¬åœäº¤äº’åŠ¨ç”»
```css
/* æ‚¬åœçŠ¶æ€ */
.chat-bubble:hover {
  transform: scale(1.05) translateY(-2px);
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* ç‚¹å‡»åé¦ˆ */
.chat-bubble:active {
  transform: scale(0.95);
  transition: all 100ms cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 3. æ¶ˆå¤±åŠ¨ç”»
```css
@keyframes bubbleExit {
  0% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
  50% {
    transform: scale(0.8) rotate(-10deg);
    opacity: 0.5;
  }
  100% {
    transform: scale(0) rotate(-20deg);
    opacity: 0;
  }
}
```

## ğŸ“ å¸ƒå±€åˆ‡æ¢åŠ¨ç”»åºåˆ—

### æ—¶åºå›¾
```
Timeline (300ms total):
0ms    â”œâ”€ æ°”æ³¡é€€å‡ºåŠ¨ç”»å¼€å§‹ (100ms)
100ms  â”œâ”€ ChatAreaæ»‘å…¥å¼€å§‹ (300ms)
       â”œâ”€ ChartAreaå®½åº¦è°ƒæ•´å¼€å§‹ (300ms)  
150ms  â”œâ”€ MessageInputå‡èµ·å¼€å§‹ (250ms)
400ms  â””â”€ æ‰€æœ‰åŠ¨ç”»å®Œæˆ
```

### 1. ChatAreaæ»‘å…¥åŠ¨ç”»
```typescript
// Framer Motionå˜ä½“
const chatAreaVariants = {
  hidden: {
    x: '-100%',
    opacity: 0,
    transition: {
      duration: 0,
    }
  },
  visible: {
    x: 0,
    opacity: 1,
    transition: {
      duration: 0.3,
      ease: [0.25, 0.46, 0.45, 0.94], // easeOutQuart
      delay: 0.1
    }
  },
  exit: {
    x: '-100%',
    opacity: 0,
    transition: {
      duration: 0.25,
      ease: [0.55, 0.06, 0.68, 0.19], // easeInQuart
    }
  }
}
```

### 2. ChartAreaè‡ªé€‚åº”åŠ¨ç”»
```typescript
const chartAreaVariants = {
  fullWidth: {
    width: '100%',
    transition: {
      duration: 0.3,
      ease: [0.25, 0.46, 0.45, 0.94],
    }
  },
  halfWidth: {
    width: '50%',
    transition: {
      duration: 0.3,
      ease: [0.25, 0.46, 0.45, 0.94],
      delay: 0.1
    }
  }
}
```

### 3. MessageInputå‡èµ·åŠ¨ç”»
```typescript
const inputAreaVariants = {
  hidden: {
    y: 50,
    opacity: 0,
    transition: {
      duration: 0
    }
  },
  visible: {
    y: 0,
    opacity: 1,
    transition: {
      duration: 0.25,
      ease: [0.25, 0.46, 0.45, 0.94],
      delay: 0.15
    }
  },
  exit: {
    y: 30,
    opacity: 0,
    transition: {
      duration: 0.2,
      ease: [0.55, 0.06, 0.68, 0.19],
    }
  }
}
```

## ğŸ“± å“åº”å¼åŠ¨ç”»é€‚é…

### æ¡Œé¢ç«¯ (>1024px) - å®Œæ•´åŠ¨ç”»
```typescript
const desktopAnimations = {
  chatBubble: {
    entrance: 'bubbleEnter 400ms ease-out',
    pulse: 'bubblePulse 2s ease-in-out infinite',
    exit: 'bubbleExit 200ms ease-in',
    position: 'bottom-left' // é»˜è®¤å·¦ä¸‹è§’ä½ç½®
  },
  layout: {
    chatSlide: '300ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',
    chartResize: '300ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',
    inputRise: '250ms cubic-bezier(0.25, 0.46, 0.45, 0.94)'
  }
}
```

### å¹³æ¿ç«¯ (768px-1024px) - ç®€åŒ–åŠ¨ç”»
```typescript
const tabletAnimations = {
  chatBubble: {
    entrance: 'bubbleEnter 300ms ease-out',
    pulse: 'none', // ç¦ç”¨è„‰åŠ¨
    exit: 'bubbleExit 150ms ease-in'
  },
  layout: {
    chatSlide: '250ms ease-out',
    chartResize: '250ms ease-out',
    inputRise: '200ms ease-out'
  }
}
```

### ç§»åŠ¨ç«¯ (<768px) - æœ€å°åŒ–åŠ¨ç”»
```typescript
const mobileAnimations = {
  chatBubble: {
    entrance: 'none', // ç›´æ¥æ˜¾ç¤º
    pulse: 'none',
    exit: 'fadeOut 100ms ease-in'
  },
  layout: {
    // ä½¿ç”¨transform3dä¼˜åŒ–æ€§èƒ½
    chatSlide: 'transform 200ms ease-out',
    chartResize: 'none', // ç«‹å³åˆ‡æ¢
    inputRise: 'transform 150ms ease-out'
  }
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. GPUåŠ é€Ÿ
```css
/* å¼ºåˆ¶GPUåŠ é€Ÿ */
.chat-area-container,
.chart-area-container,
.input-area-container {
  transform: translateZ(0);
  will-change: transform, opacity;
}

/* åŠ¨ç”»æœŸé—´å¯ç”¨ */
.animating {
  will-change: transform, opacity, width;
}

/* åŠ¨ç”»ç»“æŸåç§»é™¤ */
.animation-complete {
  will-change: auto;
}
```

### 2. é¿å…é‡æ’é‡ç»˜
```typescript
// ä½¿ç”¨transformä»£æ›¿æ”¹å˜width/height
const optimizedChartResize = {
  // âŒ è§¦å‘é‡æ’
  // width: '50%'
  
  // âœ… ä½¿ç”¨transform
  transform: 'scaleX(0.5)',
  transformOrigin: 'left center'
}
```

### 3. åŠ¨ç”»èŠ‚æµ
```typescript
// é˜²æŠ–å¤„ç†å¿«é€Ÿç‚¹å‡»
const useThrottledToggle = () => {
  const [isAnimating, setIsAnimating] = useState(false)
  
  const throttledToggle = useCallback(
    throttle(() => {
      if (!isAnimating) {
        setIsAnimating(true)
        toggleChatMode()
        setTimeout(() => setIsAnimating(false), 400)
      }
    }, 500),
    [isAnimating]
  )
  
  return throttledToggle
}
```

## ğŸ›ï¸ åŠ¨ç”»æ§åˆ¶ç³»ç»Ÿ

### 1. åŠ¨ç”»çŠ¶æ€ç®¡ç†
```typescript
interface AnimationState {
  // å½“å‰åŠ¨ç”»çŠ¶æ€
  phase: 'idle' | 'entering' | 'exiting' | 'transitioning'
  
  // åŠ¨ç”»è¿›åº¦
  progress: number // 0-1
  
  // åŠ¨ç”»é…ç½®
  config: {
    enabled: boolean
    reduced: boolean // ç”¨æˆ·åå¥½ï¼šå‡å°‘åŠ¨ç”»
    performance: 'high' | 'medium' | 'low'
  }
}

const useAnimationState = () => {
  const [state, setState] = useState<AnimationState>({
    phase: 'idle',
    progress: 0,
    config: {
      enabled: !window.matchMedia('(prefers-reduced-motion: reduce)').matches,
      reduced: false,
      performance: 'high'
    }
  })
  
  return { state, setState }
}
```

### 2. åŠ¨ç”»ç¼–æ’å™¨
```typescript
class AnimationOrchestrator {
  private timeline: gsap.Timeline
  
  constructor() {
    this.timeline = gsap.timeline()
  }
  
  // è¿›å…¥èŠå¤©æ¨¡å¼
  enterChatMode() {
    this.timeline
      .to('.chat-bubble', {
        scale: 0,
        opacity: 0,
        duration: 0.1,
        ease: 'power2.in'
      })
      .to('.chat-area', {
        x: 0,
        opacity: 1,
        duration: 0.3,
        ease: 'power2.out'
      }, '-=0.05')
      .to('.chart-area', {
        width: '50%',
        duration: 0.3,
        ease: 'power2.out'
      }, '<')
      .to('.input-area', {
        y: 0,
        opacity: 1,
        duration: 0.25,
        ease: 'power2.out'
      }, '-=0.15')
  }
  
  // é€€å‡ºèŠå¤©æ¨¡å¼
  exitChatMode() {
    this.timeline
      .to('.input-area', {
        y: 30,
        opacity: 0,
        duration: 0.2,
        ease: 'power2.in'
      })
      .to(['.chat-area'], {
        x: '-100%',
        opacity: 0,
        duration: 0.25,
        ease: 'power2.in'
      }, '-=0.1')
      .to('.chart-area', {
        width: '100%',
        duration: 0.3,
        ease: 'power2.out'
      }, '<')
      .to('.chat-bubble', {
        scale: 1,
        opacity: 1,
        duration: 0.25,
        ease: 'back.out(1.7)'
      }, '-=0.1')
  }
}
```

## ğŸ” è°ƒè¯•å’Œæµ‹è¯•

### åŠ¨ç”»è°ƒè¯•å·¥å…·
```typescript
const AnimationDebugger = () => {
  const [debugMode, setDebugMode] = useState(false)
  
  useEffect(() => {
    if (debugMode) {
      // æ˜¾ç¤ºåŠ¨ç”»è¾¹ç•Œæ¡†
      document.body.classList.add('debug-animations')
      
      // æ…¢æ”¾åŠ¨ç”»
      document.documentElement.style.setProperty('--animation-speed', '0.3')
    }
  }, [debugMode])
  
  return debugMode ? (
    <div className="fixed top-4 right-4 z-50 bg-background border rounded p-2">
      <button onClick={() => setDebugMode(false)}>
        å…³é—­åŠ¨ç”»è°ƒè¯•
      </button>
    </div>
  ) : null
}
```

### æ€§èƒ½ç›‘æ§
```typescript
const useAnimationPerformance = () => {
  const [metrics, setMetrics] = useState({
    fps: 60,
    frameDrops: 0,
    duration: 0
  })
  
  const measurePerformance = useCallback(() => {
    const start = performance.now()
    let frames = 0
    let lastFrame = start
    
    const measure = () => {
      const now = performance.now()
      frames++
      
      if (now - start < 1000) {
        requestAnimationFrame(measure)
      } else {
        setMetrics({
          fps: Math.round(frames * 1000 / (now - start)),
          frameDrops: Math.max(0, 60 - frames),
          duration: now - start
        })
      }
      
      lastFrame = now
    }
    
    requestAnimationFrame(measure)
  }, [])
  
  return { metrics, measurePerformance }
}
```

## âœ… åŠ¨ç”»è´¨é‡æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æ£€æŸ¥
- [ ] èŠå¤©æ°”æ³¡æ­£å¸¸æ˜¾ç¤ºå’Œéšè—
- [ ] å¸ƒå±€åˆ‡æ¢åŠ¨ç”»æµç•…æ— å¡é¡¿
- [ ] åŠ¨ç”»åºåˆ—æ—¶æœºæ­£ç¡®
- [ ] æ”¯æŒå¿«é€Ÿç‚¹å‡»é˜²æŠ–
- [ ] åŠ¨ç”»å¯ä»¥è¢«ä¸­æ–­å’Œé‡ç½®

### æ€§èƒ½æ£€æŸ¥
- [ ] åŠ¨ç”»å¸§ç‡ç¨³å®šåœ¨60fps
- [ ] æ²¡æœ‰æ˜æ˜¾çš„é‡æ’é‡ç»˜
- [ ] GPUåŠ é€Ÿæ­£å¸¸å·¥ä½œ
- [ ] å†…å­˜å ç”¨ç¨³å®š
- [ ] ç§»åŠ¨ç«¯æ€§èƒ½å¯æ¥å—

### å¯è®¿é—®æ€§æ£€æŸ¥
- [ ] æ”¯æŒprefers-reduced-motion
- [ ] é”®ç›˜å¯¼èˆªä¸å—å½±å“
- [ ] å±å¹•é˜…è¯»å™¨å…¼å®¹
- [ ] åŠ¨ç”»æœ‰é€‚å½“çš„è¯­ä¹‰æç¤º

### å…¼å®¹æ€§æ£€æŸ¥
- [ ] ä¸»æµæµè§ˆå™¨å…¼å®¹
- [ ] ä¸åŒå±å¹•å°ºå¯¸æ­£å¸¸
- [ ] è§¦æ‘¸è®¾å¤‡äº¤äº’æ­£å¸¸
- [ ] ä½æ€§èƒ½è®¾å¤‡é™çº§æ–¹æ¡ˆ

---

*æ­¤åŠ¨ç”»è§„èŒƒç¡®ä¿DataEyesèŠå¤©åŠŸèƒ½çš„å¸ƒå±€åˆ‡æ¢æ—¢ç¾è§‚æµç•…åˆæ€§èƒ½ä¼˜å¼‚ï¼Œä¸ºç”¨æˆ·æä¾›è‡ªç„¶ç›´è§‚çš„äº¤äº’ä½“éªŒã€‚*