# IM Agents Web é¡¹ç›®ç›®å½•ç»“æ„åˆ†ææŠ¥å‘Š

## ğŸ“‹ ç›®å½•
1. [å½“å‰é¡¹ç›®ç›®å½•ç»“æ„æ¢³ç†](#1-å½“å‰é¡¹ç›®ç›®å½•ç»“æ„æ¢³ç†)
2. [ä¼˜ç§€æ¡ˆä¾‹åˆ†æ](#2-ä¼˜ç§€æ¡ˆä¾‹åˆ†æ)
3. [å½“å‰é¡¹ç›®è¯„ä»·ä¸å»ºè®®](#3-å½“å‰é¡¹ç›®è¯„ä»·ä¸å»ºè®®)

---

## 1. å½“å‰é¡¹ç›®ç›®å½•ç»“æ„æ¢³ç†

### 1.1 é¡¹ç›®æ¦‚è§ˆ
- **é¡¹ç›®åç§°**: IM Agents Web
- **æŠ€æœ¯æ ˆ**: React 19 + TypeScript + Vite + Tailwind CSS + shadcn UI + zustand + react-i18next
- **é¡¹ç›®ç±»å‹**: ä¼ä¸šçº§å³æ—¶é€šè®¯å‰ç«¯åº”ç”¨

### 1.2 å®Œæ•´ç›®å½•ç»“æ„

```
im-agents-web/
â”œâ”€â”€ ğŸ“ public/                      # å…¬å…±é™æ€èµ„æº
â”‚   â””â”€â”€ vite.svg
â”‚
â”œâ”€â”€ ğŸ“ src/                         # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API å±‚ (RESTful)
â”‚   â”‚   â”œâ”€â”€ client.ts               # Axios å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.ts                # API ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ types.ts                # API ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ README.md               # API æ–‡æ¡£è¯´æ˜
â”‚   â”‚   â””â”€â”€ ğŸ“ modules/             # æ¨¡å—åŒ– API
â”‚   â”‚       â”œâ”€â”€ index.ts
â”‚   â”‚       â””â”€â”€ ğŸ“ agents/          # Agents ç›¸å…³ API
â”‚   â”‚           â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/              # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ui/                  # shadcn UI åŸºç¡€ç»„ä»¶ â­
â”‚   â”‚   â”‚   â”œâ”€â”€ badge.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ switch.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”‚   â””â”€â”€ textarea.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ layout/              # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AnalysisLayout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ContactMessageLayout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DataEyesLayout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ MessageLayout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“„ ä¸šåŠ¡ç»„ä»¶ (æ ¹ç›®å½•)
â”‚   â”‚       â”œâ”€â”€ AdaptiveContainer.tsx
â”‚   â”‚       â”œâ”€â”€ AgentList.tsx
â”‚   â”‚       â”œâ”€â”€ ChartArea.tsx
â”‚   â”‚       â”œâ”€â”€ ChatArea.tsx
â”‚   â”‚       â”œâ”€â”€ ChatBubble.tsx
â”‚   â”‚       â”œâ”€â”€ ChatInputArea.tsx
â”‚   â”‚       â”œâ”€â”€ ContactChatArea.tsx
â”‚   â”‚       â”œâ”€â”€ ContactsList.tsx
â”‚   â”‚       â”œâ”€â”€ ConversationList.tsx
â”‚   â”‚       â”œâ”€â”€ DebugAgents.tsx
â”‚   â”‚       â”œâ”€â”€ DefaultRedirect.tsx
â”‚   â”‚       â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚       â”œâ”€â”€ FooterBar.tsx
â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚       â”œâ”€â”€ LanguageSwitcher.tsx
â”‚   â”‚       â”œâ”€â”€ MessageInput.tsx
â”‚   â”‚       â”œâ”€â”€ SettingsPanel.tsx
â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚       â”œâ”€â”€ ThemeToggle.tsx
â”‚   â”‚       â””â”€â”€ WebSocketStatus.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ hooks/                   # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useDataEyesPreferences.ts
â”‚   â”‚   â”œâ”€â”€ useEnsureWebSocketConnected.ts
â”‚   â”‚   â”œâ”€â”€ useI18n.ts
â”‚   â”‚   â””â”€â”€ useWebSocketChatIntegration.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ i18n/                    # å›½é™…åŒ–é…ç½® â­
â”‚   â”‚   â”œâ”€â”€ index.ts                # i18n åˆå§‹åŒ–é…ç½®
â”‚   â”‚   â”œâ”€â”€ types.ts                # å›½é™…åŒ–ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ ğŸ“ resources/           # ç¿»è¯‘èµ„æº
â”‚   â”‚       â”œâ”€â”€ ğŸ“ zh/              # ä¸­æ–‡
â”‚   â”‚       â”‚   â”œâ”€â”€ agents.json
â”‚   â”‚       â”‚   â”œâ”€â”€ chat.json
â”‚   â”‚       â”‚   â”œâ”€â”€ common.json
â”‚   â”‚       â”‚   â””â”€â”€ ui.json
â”‚   â”‚       â”œâ”€â”€ ğŸ“ en/              # è‹±æ–‡
â”‚   â”‚       â”‚   â”œâ”€â”€ agents.json
â”‚   â”‚       â”‚   â”œâ”€â”€ chat.json
â”‚   â”‚       â”‚   â”œâ”€â”€ common.json
â”‚   â”‚       â”‚   â””â”€â”€ ui.json
â”‚   â”‚       â””â”€â”€ ğŸ“ ar/              # é˜¿æ‹‰ä¼¯æ–‡
â”‚   â”‚           â”œâ”€â”€ agents.json
â”‚   â”‚           â”œâ”€â”€ chat.json
â”‚   â”‚           â”œâ”€â”€ common.json
â”‚   â”‚           â””â”€â”€ ui.json
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ lib/                     # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ sse.ts                  # Server-Sent Events
â”‚   â”‚   â”œâ”€â”€ utils.ts                # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ websocket.ts            # WebSocket ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ store/                   # çŠ¶æ€ç®¡ç† (zustand) â­
â”‚   â”‚   â”œâ”€â”€ agentsStore.ts          # Agents çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ chatStore.ts            # èŠå¤©çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ conversationStore.ts    # ä¼šè¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ i18nStore.ts            # å›½é™…åŒ–çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ themeStore.ts           # ä¸»é¢˜çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ userStore.ts            # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â””â”€â”€ websocketStore.ts       # WebSocket çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ types/                   # TypeScript ç±»å‹å®šä¹‰ â­
â”‚   â”‚   â”œâ”€â”€ chat-websocket.ts       # èŠå¤© WebSocket ç±»å‹
â”‚   â”‚   â”œâ”€â”€ contacts.ts             # è”ç³»äººç±»å‹
â”‚   â”‚   â”œâ”€â”€ conversation.ts         # ä¼šè¯ç±»å‹
â”‚   â”‚   â”œâ”€â”€ dataEyes.ts             # æ•°æ®è§†å›¾ç±»å‹
â”‚   â”‚   â”œâ”€â”€ router.ts               # è·¯ç”±ç±»å‹
â”‚   â”‚   â”œâ”€â”€ user.ts                 # ç”¨æˆ·ç±»å‹
â”‚   â”‚   â””â”€â”€ websocket.ts            # WebSocket ç±»å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # å·¥å…·å‡½æ•°ç›®å½• (ç©º)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ assets/                  # é™æ€èµ„æº
â”‚   â”‚   â””â”€â”€ react.svg
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                     # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ App.css                     # åº”ç”¨æ ·å¼
â”‚   â”œâ”€â”€ main.tsx                    # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ index.css                   # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ vite-env.d.ts               # Vite ç±»å‹å£°æ˜
â”‚
â”œâ”€â”€ ğŸ“ docs/                        # æ–‡æ¡£ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“ dist/                        # æ„å»ºè¾“å‡ºç›®å½•
â”‚
â”œâ”€â”€ ğŸ“ node_modules/                # ä¾èµ–åŒ…
â”‚
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ components.json             # shadcn UI é…ç½®
â”‚   â”œâ”€â”€ eslint.config.js            # ESLint é…ç½®
â”‚   â”œâ”€â”€ postcss.config.js           # PostCSS é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”‚   â”œâ”€â”€ tsconfig.app.json           # åº”ç”¨ TS é…ç½®
â”‚   â”œâ”€â”€ tsconfig.node.json          # Node TS é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts              # Vite é…ç½®
â”‚   â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–
â”‚   â””â”€â”€ package-lock.json           # ä¾èµ–é”å®š
â”‚
â”œâ”€â”€ index.html                      # HTML å…¥å£
â””â”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
```

### 1.3 ç›®å½•èŒè´£è¯´æ˜

| ç›®å½• | èŒè´£ | æ–‡ä»¶æ•°é‡ | å¤‡æ³¨ |
|------|------|---------|------|
| `src/api/` | API æ¥å£ç®¡ç†ï¼ŒRESTful è¯·æ±‚ | 4 æ–‡ä»¶ + å­æ¨¡å— | æ¨¡å—åŒ–è®¾è®¡ â­ |
| `src/components/` | React ç»„ä»¶ | 20+ ä¸šåŠ¡ç»„ä»¶ | ç»„ä»¶è¾ƒå¤šï¼Œå¯ä¼˜åŒ– |
| `src/components/ui/` | shadcn UI åŸºç¡€ç»„ä»¶ | 8 ä¸ªç»„ä»¶ | è®¾è®¡è§„èŒƒ â­ |
| `src/components/layout/` | å¸ƒå±€ç»„ä»¶ | 4 ä¸ªå¸ƒå±€ | å¸ƒå±€åˆ†ç¦» â­ |
| `src/hooks/` | è‡ªå®šä¹‰ React Hooks | 4 ä¸ª hooks | é€»è¾‘å¤ç”¨ â­ |
| `src/i18n/` | å›½é™…åŒ–é…ç½®å’Œèµ„æº | 3 è¯­è¨€ Ã— 4 å‘½åç©ºé—´ | å®Œæ•´çš„ i18n æ”¯æŒ â­ |
| `src/lib/` | å·¥å…·åº“å’Œç¬¬ä¸‰æ–¹å°è£… | 3 ä¸ªæ ¸å¿ƒåº“ | SSEã€WebSocket |
| `src/store/` | zustand çŠ¶æ€ç®¡ç† | 7 ä¸ª store | çŠ¶æ€ç®¡ç†å®Œå–„ â­ |
| `src/types/` | TypeScript ç±»å‹å®šä¹‰ | 7 ä¸ªç±»å‹æ–‡ä»¶ | ç±»å‹å®‰å…¨ â­ |
| `src/utils/` | é€šç”¨å·¥å…·å‡½æ•° | ç©ºç›®å½• | å¾…å®Œå–„ âš ï¸ |

---

## 2. ä¼˜ç§€æ¡ˆä¾‹åˆ†æ

### 2.1 æ¡ˆä¾‹ä¸€ï¼šVercel çš„ Next.js App Router é¡¹ç›®ç»“æ„

**é¡¹ç›®èƒŒæ™¯**: Vercel å®˜æ–¹æ¨èçš„ Next.js 13+ App Router é¡¹ç›®ç»“æ„

```
nextjs-app/
â”œâ”€â”€ ğŸ“ app/                         # App Router æ ¸å¿ƒ
â”‚   â”œâ”€â”€ (auth)/                     # è·¯ç”±ç»„ (ä¸å½±å“ URL)
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ register/
â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”œâ”€â”€ api/                        # API Routes
â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”œâ”€â”€ layout.tsx                  # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                    # é¦–é¡µ
â”‚   â””â”€â”€ error.tsx                   # é”™è¯¯é¡µé¢
â”‚
â”œâ”€â”€ ğŸ“ components/                  # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ui/                         # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ forms/                      # è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ layouts/                    # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ features/                   # åŠŸèƒ½ç»„ä»¶
â”‚       â”œâ”€â”€ auth/
â”‚       â”œâ”€â”€ dashboard/
â”‚       â””â”€â”€ analytics/
â”‚
â”œâ”€â”€ ğŸ“ lib/                         # å·¥å…·åº“
â”‚   â”œâ”€â”€ api/                        # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ hooks/                      # è‡ªå®šä¹‰ hooks
â”‚   â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ validations/                # æ•°æ®éªŒè¯
â”‚
â”œâ”€â”€ ğŸ“ types/                       # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ components.ts
â”‚   â””â”€â”€ models.ts
â”‚
â”œâ”€â”€ ğŸ“ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ site.ts                     # ç«™ç‚¹é…ç½®
â”‚   â””â”€â”€ navigation.ts               # å¯¼èˆªé…ç½®
â”‚
â””â”€â”€ ğŸ“ public/                      # é™æ€èµ„æº
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **è·¯ç”±ç»„ç»‡**: ä½¿ç”¨ `(group)` è¯­æ³•ç»„ç»‡è·¯ç”±ï¼Œæ¸…æ™°çš„åŠŸèƒ½åˆ†ç»„
2. âœ… **ç»„ä»¶åˆ†å±‚**: `ui/` â†’ `forms/` â†’ `features/` ä¸‰å±‚ç»„ä»¶æ¶æ„
3. âœ… **é…ç½®é›†ä¸­**: `config/` ç›®å½•ç»Ÿä¸€ç®¡ç†é…ç½®
4. âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
5. âœ… **éªŒè¯åˆ†ç¦»**: ç‹¬ç«‹çš„ `validations/` ç›®å½•

**å…³é”®ç‰¹ç‚¹**:
- **æŒ‰åŠŸèƒ½åˆ†ç»„**: features ç›®å½•æŒ‰ä¸šåŠ¡åŠŸèƒ½ç»„ç»‡
- **Colocation**: ç›¸å…³æ–‡ä»¶å°±è¿‘æ”¾ç½®
- **æ¸…æ™°çš„å±‚æ¬¡**: ä»åŸºç¡€ UI â†’ ä¸šåŠ¡ç»„ä»¶çš„æ¸è¿›å¼ç»„ç»‡

---

### 2.2 æ¡ˆä¾‹äºŒï¼šBulletproof React (ä¼ä¸šçº§ React æœ€ä½³å®è·µ)

**é¡¹ç›®èƒŒæ™¯**: GitHub 60k+ stars çš„ä¼ä¸šçº§ React é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ

```
bulletproof-react/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ app/                     # åº”ç”¨é…ç½®å’Œè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ provider.tsx
â”‚   â”‚   â””â”€â”€ routes.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ features/                # â­ æ ¸å¿ƒï¼šæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/                # è¯¥åŠŸèƒ½çš„ API
â”‚   â”‚   â”‚   â”œâ”€â”€ components/         # è¯¥åŠŸèƒ½çš„ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/              # è¯¥åŠŸèƒ½çš„ hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/             # è¯¥åŠŸèƒ½çš„çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ types/              # è¯¥åŠŸèƒ½çš„ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/              # è¯¥åŠŸèƒ½çš„å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ index.ts            # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ users/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ discussions/
â”‚   â”‚       â”œâ”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ hooks/
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/              # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                     # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ forms/                  # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/                # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ elements/               # å…ƒç´ ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ lib/                     # å¤–éƒ¨åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ axios.ts
â”‚   â”‚   â”œâ”€â”€ react-query.ts
â”‚   â”‚   â””â”€â”€ react-router.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ stores/                  # å…¨å±€çŠ¶æ€
â”‚   â”‚   â””â”€â”€ notifications.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                   # é€šç”¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”œâ”€â”€ storage.ts
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ types/                   # å…¨å±€ç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ testing/                 # æµ‹è¯•å·¥å…·
â”‚       â”œâ”€â”€ test-utils.tsx
â”‚       â””â”€â”€ mocks/
â”‚
â””â”€â”€ ğŸ“ config/
    â””â”€â”€ env.ts
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **Feature-Based æ¶æ„**: æŒ‰ä¸šåŠ¡åŠŸèƒ½å‚ç›´åˆ‡åˆ†ï¼Œé«˜å†…èšä½è€¦åˆ â­â­â­
2. âœ… **è‡ªåŒ…å«æ¨¡å—**: æ¯ä¸ª feature åŒ…å«è‡ªå·±çš„ apiã€componentsã€hooksã€stores
3. âœ… **æ¸…æ™°çš„åˆ†å±‚**: features (ä¸šåŠ¡) â†’ components (é€šç”¨) â†’ lib (åŸºç¡€)
4. âœ… **å¯æ‰©å±•æ€§**: æ–°å¢åŠŸèƒ½åªéœ€æ·»åŠ æ–°çš„ feature ç›®å½•
5. âœ… **æµ‹è¯•å‹å¥½**: ç‹¬ç«‹çš„ testing ç›®å½•å’Œå·¥å…·

**å…³é”®ç‰¹ç‚¹**:
- **å‚ç›´åˆ†å±‚**: æŒ‰åŠŸèƒ½æ¨¡å—è€ŒéæŠ€æœ¯ç±»å‹ç»„ç»‡
- **ç»Ÿä¸€å¯¼å‡º**: æ¯ä¸ª feature é€šè¿‡ index.ts ç»Ÿä¸€å¯¼å‡º
- **ä¾èµ–æ§åˆ¶**: features ä¹‹é—´é€šè¿‡ index å¯¼å‡ºçš„å…¬å…± API äº¤äº’

**é€‚ç”¨åœºæ™¯**:
- å¤§å‹ä¼ä¸šçº§åº”ç”¨
- å¤šå›¢é˜Ÿåä½œé¡¹ç›®
- éœ€è¦é«˜å¯ç»´æŠ¤æ€§çš„é•¿æœŸé¡¹ç›®

---

### 2.3 æ¡ˆä¾‹ä¸‰ï¼šshadcn-ui Taxonomy (shadcn å®˜æ–¹ç¤ºä¾‹é¡¹ç›®)

**é¡¹ç›®èƒŒæ™¯**: shadcn UI ä½œè€…çš„ Next.js + shadcn UI + Tailwind ç¤ºä¾‹é¡¹ç›®

```
taxonomy/
â”œâ”€â”€ ğŸ“ app/                         # Next.js App Router
â”‚   â”œâ”€â”€ (marketing)/                # è¥é”€é¡µé¢ç»„
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ pricing/
â”‚   â”‚   â””â”€â”€ blog/
â”‚   â”œâ”€â”€ (dashboard)/                # ä»ªè¡¨æ¿ç»„
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ settings/
â”‚   â””â”€â”€ (auth)/                     # è®¤è¯ç»„
â”‚       â”œâ”€â”€ login/
â”‚       â””â”€â”€ register/
â”‚
â”œâ”€â”€ ğŸ“ components/                  # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ ui/                      # shadcn UI ç»„ä»¶ â­
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ marketing/               # è¥é”€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hero.tsx
â”‚   â”‚   â””â”€â”€ pricing-card.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ dashboard/               # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ nav.tsx
â”‚   â”‚   â””â”€â”€ sidebar.tsx
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ common/                  # é€šç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ header.tsx
â”‚       â””â”€â”€ footer.tsx
â”‚
â”œâ”€â”€ ğŸ“ lib/                         # å·¥å…·åº“
â”‚   â”œâ”€â”€ utils.ts                    # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ validations/                # Zod éªŒè¯
â”‚   â””â”€â”€ api/                        # API å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ ğŸ“ hooks/                       # è‡ªå®šä¹‰ hooks
â”‚   â”œâ”€â”€ use-toast.ts
â”‚   â””â”€â”€ use-mounted.ts
â”‚
â”œâ”€â”€ ğŸ“ types/                       # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.d.ts
â”‚
â”œâ”€â”€ ğŸ“ config/                      # é…ç½®æ–‡ä»¶ â­
â”‚   â”œâ”€â”€ site.ts                     # ç«™ç‚¹é…ç½®
â”‚   â”œâ”€â”€ marketing.ts                # è¥é”€é…ç½®
â”‚   â””â”€â”€ dashboard.ts                # ä»ªè¡¨æ¿é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ styles/                      # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ globals.css
â”‚
â””â”€â”€ ğŸ“ public/
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **è·¯ç”±ç»„ç»‡**: ä½¿ç”¨è·¯ç”±ç»„ `()` æ¸…æ™°åˆ†ç»„é¡µé¢
2. âœ… **ç»„ä»¶åˆ†ç»„**: components æŒ‰é¡µé¢/åŠŸèƒ½åˆ†ç»„ (marketing, dashboard)
3. âœ… **é…ç½®é›†ä¸­**: config ç›®å½•ç»Ÿä¸€ç®¡ç†å„ç§é…ç½® â­
4. âœ… **shadcn UI ä¼˜å…ˆ**: ui/ ç›®å½•å­˜æ”¾ shadcn ç»„ä»¶
5. âœ… **éªŒè¯åˆ†ç¦»**: lib/validations/ ç‹¬ç«‹ç®¡ç†æ•°æ®éªŒè¯

**å…³é”®ç‰¹ç‚¹**:
- **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†å¯¼èˆªã€ç«™ç‚¹ä¿¡æ¯ç­‰
- **æ¸è¿›å¼ç»„ä»¶**: ui â†’ common â†’ feature-specific çš„ç»„ä»¶å±‚æ¬¡
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript + Zod éªŒè¯

**é€‚ç”¨åœºæ™¯**:
- ä¸­å°å‹é¡¹ç›®
- å¿«é€ŸåŸå‹å¼€å‘
- shadcn UI æŠ€æœ¯æ ˆé¡¹ç›®

---

## 3. å½“å‰é¡¹ç›®è¯„ä»·ä¸å»ºè®®

### 3.1 ä¼˜ç‚¹æ€»ç»“ â­

| ä¼˜ç‚¹ | è¯¦ç»†è¯´æ˜ | å¯¹æ¯”æ¡ˆä¾‹ |
|------|---------|---------|
| **å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒ** | 3 è¯­è¨€ Ã— 4 å‘½åç©ºé—´ï¼Œç»“æ„æ¸…æ™° | ä¼˜äºæ¡ˆä¾‹ 1ã€2ã€3 |
| **shadcn UI è§„èŒƒ** | ç‹¬ç«‹çš„ ui/ ç›®å½•ï¼Œç¬¦åˆæœ€ä½³å®è·µ | ä¸æ¡ˆä¾‹ 3 ä¸€è‡´ â­ |
| **æ¨¡å—åŒ– API** | api/modules/ ç»“æ„ï¼Œæ”¯æŒæ‰©å±• | å€Ÿé‰´æ¡ˆä¾‹ 2 çš„æ€æƒ³ |
| **ç±»å‹å®‰å…¨** | å®Œæ•´çš„ types/ ç›®å½•ï¼Œ7 ä¸ªç±»å‹æ–‡ä»¶ | ä¸æ¡ˆä¾‹ 1ã€2ã€3 ä¸€è‡´ |
| **çŠ¶æ€ç®¡ç†å®Œå–„** | 7 ä¸ªç‹¬ç«‹ storeï¼ŒèŒè´£æ¸…æ™° | ä¼˜äºæ¡ˆä¾‹ 3 |
| **å¸ƒå±€ç»„ä»¶åˆ†ç¦»** | 4 ä¸ªç‹¬ç«‹å¸ƒå±€ï¼Œå¤ç”¨æ€§å¥½ | ä¸æ¡ˆä¾‹ 1ã€3 ä¸€è‡´ |
| **è‡ªå®šä¹‰ Hooks** | 4 ä¸ªä¸šåŠ¡ hooksï¼Œé€»è¾‘å¤ç”¨ | ä¸æ¡ˆä¾‹ 2 ä¸€è‡´ |

### 3.2 å­˜åœ¨çš„é—®é¢˜ âš ï¸

#### é—®é¢˜ 1: ç»„ä»¶ç›®å½•æ‰å¹³åŒ–ï¼Œç¼ºä¹åˆ†ç»„

**å½“å‰çŠ¶æ€**:
```
components/
â”œâ”€â”€ ui/
â”œâ”€â”€ layout/
â”œâ”€â”€ AdaptiveContainer.tsx
â”œâ”€â”€ AgentList.tsx
â”œâ”€â”€ ChartArea.tsx
â”œâ”€â”€ ChatArea.tsx
â”œâ”€â”€ ChatBubble.tsx
â”œâ”€â”€ ChatInputArea.tsx
â”œâ”€â”€ ContactChatArea.tsx
â”œâ”€â”€ ContactsList.tsx
â”œâ”€â”€ ConversationList.tsx
â”œâ”€â”€ DebugAgents.tsx
â”œâ”€â”€ ... (20+ ä¸ªç»„ä»¶å¹³é“º)
```

**é—®é¢˜åˆ†æ**:
- âŒ 20+ ä¸ªç»„ä»¶å¹³é“ºåœ¨æ ¹ç›®å½•ï¼Œéš¾ä»¥æŸ¥æ‰¾
- âŒ æ²¡æœ‰æŒ‰åŠŸèƒ½æˆ–é¡µé¢åˆ†ç»„
- âŒ ç»„ä»¶èŒè´£ä¸æ¸…æ™°

**å‚è€ƒæ¡ˆä¾‹ 2 (Bulletproof React)**:
```
components/
â”œâ”€â”€ ui/                    # åŸºç¡€ç»„ä»¶
â”œâ”€â”€ forms/                 # è¡¨å•ç»„ä»¶
â”œâ”€â”€ layouts/               # å¸ƒå±€ç»„ä»¶
â””â”€â”€ features/              # åŠŸèƒ½ç»„ä»¶
    â”œâ”€â”€ chat/
    â”œâ”€â”€ agents/
    â””â”€â”€ contacts/
```

**å‚è€ƒæ¡ˆä¾‹ 3 (Taxonomy)**:
```
components/
â”œâ”€â”€ ui/                    # shadcn UI
â”œâ”€â”€ common/                # é€šç”¨ç»„ä»¶
â”œâ”€â”€ chat/                  # èŠå¤©ç›¸å…³
â”œâ”€â”€ agents/                # Agents ç›¸å…³
â””â”€â”€ contacts/              # è”ç³»äººç›¸å…³
```

---

#### é—®é¢˜ 2: ç¼ºä¹ Feature-Based ç»„ç»‡

**å½“å‰çŠ¶æ€**:
```
src/
â”œâ”€â”€ api/
â”œâ”€â”€ components/
â”œâ”€â”€ hooks/
â”œâ”€â”€ store/
â””â”€â”€ types/
```

**é—®é¢˜åˆ†æ**:
- âŒ æŒ‰æŠ€æœ¯ç±»å‹åˆ†å±‚ï¼ˆAPIã€ç»„ä»¶ã€çŠ¶æ€åˆ†ç¦»ï¼‰
- âŒ ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½éœ€è¦è·¨å¤šä¸ªç›®å½•
- âŒ åŠŸèƒ½æ¨¡å—è€¦åˆåº¦é«˜

**å»ºè®®ç»“æ„ (å€Ÿé‰´æ¡ˆä¾‹ 2)**:
```
src/
â”œâ”€â”€ features/              # åŠŸèƒ½æ¨¡å— â­
â”‚   â”œâ”€â”€ chat/              # èŠå¤©åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/            # Agents åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ contacts/          # è”ç³»äººåŠŸèƒ½
â”‚       â”œâ”€â”€ api/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ hooks/
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ components/            # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/
â”‚   â””â”€â”€ layouts/
â”‚
â”œâ”€â”€ lib/                   # åŸºç¡€åº“
â”œâ”€â”€ i18n/                  # å›½é™…åŒ–
â””â”€â”€ store/                 # å…¨å±€çŠ¶æ€
```

---

#### é—®é¢˜ 3: utils/ ç›®å½•ä¸ºç©º

**å½“å‰çŠ¶æ€**:
```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ sse.ts
â”‚   â”œâ”€â”€ utils.ts
â”‚   â””â”€â”€ websocket.ts
â””â”€â”€ utils/                 # ç©ºç›®å½• âš ï¸
```

**é—®é¢˜åˆ†æ**:
- âŒ `lib/utils.ts` ä¸ `utils/` ç›®å½•èŒè´£ä¸æ¸…
- âŒ å·¥å…·å‡½æ•°æ²¡æœ‰åˆ†ç±»

**å»ºè®®ä¼˜åŒ–**:
```
src/
â””â”€â”€ lib/
    â”œâ”€â”€ utils/
    â”‚   â”œâ”€â”€ format.ts      # æ ¼å¼åŒ–å·¥å…·
    â”‚   â”œâ”€â”€ storage.ts     # å­˜å‚¨å·¥å…·
    â”‚   â”œâ”€â”€ date.ts        # æ—¥æœŸå·¥å…·
    â”‚   â””â”€â”€ validation.ts  # éªŒè¯å·¥å…·
    â”œâ”€â”€ sse.ts
    â””â”€â”€ websocket.ts
```

æˆ–åˆ é™¤ç©ºçš„ `utils/` ç›®å½•ã€‚

---

#### é—®é¢˜ 4: ç¼ºä¹é…ç½®é›†ä¸­ç®¡ç†

**å½“å‰çŠ¶æ€**:
- é…ç½®åˆ†æ•£åœ¨å„ä¸ªæ–‡ä»¶ä¸­
- æ²¡æœ‰ç»Ÿä¸€çš„ config ç›®å½•

**å‚è€ƒæ¡ˆä¾‹ 3 (Taxonomy)**:
```
src/
â””â”€â”€ config/
    â”œâ”€â”€ site.ts            # ç«™ç‚¹é…ç½®
    â”œâ”€â”€ navigation.ts      # å¯¼èˆªé…ç½®
    â”œâ”€â”€ api.ts             # API é…ç½®
    â””â”€â”€ features.ts        # åŠŸèƒ½å¼€å…³
```

**å»ºè®®æ·»åŠ **:
```typescript
// src/config/site.ts
export const siteConfig = {
  name: 'IM Agents',
  description: 'ä¼ä¸šçº§å³æ—¶é€šè®¯åº”ç”¨',
  url: 'https://im-agents.com',
  links: {
    github: 'https://github.com/...',
  },
}

// src/config/navigation.ts
export const navigationConfig = {
  mainNav: [
    { title: 'æ¶ˆæ¯', href: '/messages' },
    { title: 'Agents', href: '/agents' },
    { title: 'è”ç³»äºº', href: '/contacts' },
  ],
}
```

---

### 3.3 æ¨èçš„æ”¹è¿›æ–¹æ¡ˆ

#### æ–¹æ¡ˆ A: æ¸©å’Œé‡æ„ (æ¨èç”¨äºå½“å‰é˜¶æ®µ)

é€‚åˆï¼šé¡¹ç›®å·²ç»åœ¨å¼€å‘ä¸­ï¼Œä¸æƒ³å¤§è§„æ¨¡é‡æ„

```
src/
â”œâ”€â”€ api/                           # ä¿æŒç°æœ‰ç»“æ„
â”œâ”€â”€ components/                    # ä¼˜åŒ–ç»„ä»¶åˆ†ç»„
â”‚   â”œâ”€â”€ ui/                        # shadcn UI
â”‚   â”œâ”€â”€ layout/                    # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ common/                    # é€šç”¨ç»„ä»¶ (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ FooterBar.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx
â”‚   â”‚   â”œâ”€â”€ LanguageSwitcher.tsx
â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ chat/                      # èŠå¤©ç›¸å…³ (æ–°å¢åˆ†ç»„)
â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx
â”‚   â”‚   â”œâ”€â”€ ChatBubble.tsx
â”‚   â”‚   â”œâ”€â”€ ChatInputArea.tsx
â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx
â”‚   â”‚   â””â”€â”€ ConversationList.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/                    # Agents ç›¸å…³ (æ–°å¢åˆ†ç»„)
â”‚   â”‚   â”œâ”€â”€ AgentList.tsx
â”‚   â”‚   â””â”€â”€ DebugAgents.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ contacts/                  # è”ç³»äººç›¸å…³ (æ–°å¢åˆ†ç»„)
â”‚   â”‚   â”œâ”€â”€ ContactsList.tsx
â”‚   â”‚   â””â”€â”€ ContactChatArea.tsx
â”‚   â”‚
â”‚   â””â”€â”€ dataEyes/                  # æ•°æ®è§†å›¾ç›¸å…³ (æ–°å¢åˆ†ç»„)
â”‚       â””â”€â”€ ChartArea.tsx
â”‚
â”œâ”€â”€ config/                        # é…ç½®ç®¡ç† (æ–°å¢)
â”‚   â”œâ”€â”€ site.ts
â”‚   â”œâ”€â”€ navigation.ts
â”‚   â””â”€â”€ features.ts
â”‚
â”œâ”€â”€ hooks/                         # ä¿æŒç°æœ‰
â”œâ”€â”€ i18n/                          # ä¿æŒç°æœ‰ â­
â”œâ”€â”€ lib/                           # ä¼˜åŒ–å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°åˆ†ç±»
â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”œâ”€â”€ storage.ts
â”‚   â”‚   â””â”€â”€ date.ts
â”‚   â”œâ”€â”€ sse.ts
â”‚   â””â”€â”€ websocket.ts
â”‚
â”œâ”€â”€ store/                         # ä¿æŒç°æœ‰ â­
â”œâ”€â”€ types/                         # ä¿æŒç°æœ‰ â­
â””â”€â”€ utils/                         # åˆ é™¤ç©ºç›®å½•
```

**æ”¹åŠ¨ç‚¹**:
1. âœ… ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç»„ï¼šchatã€agentsã€contactsã€dataEyes
2. âœ… æ–°å¢ common/ å­˜æ”¾é€šç”¨ç»„ä»¶
3. âœ… æ–°å¢ config/ ç›®å½•
4. âœ… ä¼˜åŒ– lib/utils/ å·¥å…·å‡½æ•°
5. âœ… åˆ é™¤ç©ºçš„ utils/ ç›®å½•

**ä¼˜ç‚¹**:
- æ”¹åŠ¨è¾ƒå°ï¼Œé£é™©ä½
- é€æ­¥ä¼˜åŒ–ï¼Œä¸å½±å“ç°æœ‰å¼€å‘
- ä¿æŒæ ¸å¿ƒæ¶æ„ä¸å˜

---

#### æ–¹æ¡ˆ B: Feature-Based é‡æ„ (æ¨èç”¨äºæ–°é¡¹ç›®æˆ–é‡å¤§é‡æ„)

é€‚åˆï¼šå‡†å¤‡å¤§è§„æ¨¡é‡æ„æˆ–æ–°é¡¹ç›®

```
src/
â”œâ”€â”€ app/                           # åº”ç”¨é…ç½® (æ–°å¢)
â”‚   â”œâ”€â”€ index.tsx
â”‚   â”œâ”€â”€ provider.tsx
â”‚   â””â”€â”€ routes.tsx
â”‚
â”œâ”€â”€ features/                      # åŠŸèƒ½æ¨¡å— â­â­â­
â”‚   â”œâ”€â”€ chat/                      # èŠå¤©åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ chatApi.ts
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBubble.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInputArea.tsx
â”‚   â”‚   â”‚   â””â”€â”€ MessageInput.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useWebSocketChatIntegration.ts
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”œâ”€â”€ chatStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ conversationStore.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ chat.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/                    # Agents åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ agentsApi.ts
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ DebugAgents.tsx
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â””â”€â”€ agentsStore.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ agents.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ contacts/                  # è”ç³»äººåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ContactsList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ContactChatArea.tsx
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ contacts.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ dataEyes/                  # æ•°æ®è§†å›¾åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ ChartArea.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useDataEyesPreferences.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ dataEyes.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ auth/                      # è®¤è¯åŠŸèƒ½ (å¦‚æœæœ‰)
â”‚       â”œâ”€â”€ api/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ stores/
â”‚       â”‚   â””â”€â”€ userStore.ts
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ components/                    # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                        # shadcn UI
â”‚   â”œâ”€â”€ layouts/                   # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ common/                    # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx
â”‚   â”‚   â””â”€â”€ LanguageSwitcher.tsx
â”‚   â””â”€â”€ forms/                     # è¡¨å•ç»„ä»¶
â”‚
â”œâ”€â”€ lib/                           # åŸºç¡€åº“
â”‚   â”œâ”€â”€ api/                       # API åŸºç¡€é…ç½®
â”‚   â”‚   â””â”€â”€ client.ts
â”‚   â”œâ”€â”€ websocket/                 # WebSocket å°è£…
â”‚   â”‚   â”œâ”€â”€ manager.ts
â”‚   â”‚   â””â”€â”€ store.ts
â”‚   â”œâ”€â”€ sse.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ format.ts
â”‚       â”œâ”€â”€ storage.ts
â”‚       â””â”€â”€ date.ts
â”‚
â”œâ”€â”€ i18n/                          # å›½é™…åŒ– â­
â”œâ”€â”€ config/                        # é…ç½®ç®¡ç†
â”œâ”€â”€ hooks/                         # å…¨å±€ hooks
â””â”€â”€ types/                         # å…¨å±€ç±»å‹
```

**ä¼˜ç‚¹**:
1. âœ… **é«˜å†…èšä½è€¦åˆ**: æ¯ä¸ª feature è‡ªåŒ…å«
2. âœ… **å¯æ‰©å±•æ€§**: æ–°å¢åŠŸèƒ½åªéœ€æ·»åŠ æ–° feature
3. âœ… **å›¢é˜Ÿåä½œ**: ä¸åŒå›¢é˜Ÿè´Ÿè´£ä¸åŒ feature
4. âœ… **ä»£ç å¤ç”¨**: é€šè¿‡ index.ts ç»Ÿä¸€å¯¼å‡ºå…¬å…± API
5. âœ… **æ˜“äºç»´æŠ¤**: ä¿®æ”¹æŸåŠŸèƒ½åªéœ€åœ¨å¯¹åº” feature ä¸­æ“ä½œ

**ç¼ºç‚¹**:
- éœ€è¦è¾ƒå¤§è§„æ¨¡çš„é‡æ„
- å›¢é˜Ÿéœ€è¦é€‚åº”æ–°çš„ç»„ç»‡æ–¹å¼

---

### 3.4 å…·ä½“æ”¹è¿›å»ºè®®

#### ä¼˜å…ˆçº§ P0 (ç«‹å³æ‰§è¡Œ)

1. **ç»„ä»¶åˆ†ç»„**
   ```bash
   # åˆ›å»ºåŠŸèƒ½åˆ†ç»„ç›®å½•
   mkdir src/components/chat
   mkdir src/components/agents
   mkdir src/components/contacts
   mkdir src/components/common
   
   # ç§»åŠ¨ç»„ä»¶
   mv src/components/ChatArea.tsx src/components/chat/
   mv src/components/ChatBubble.tsx src/components/chat/
   # ... ä¾æ¬¡ç§»åŠ¨
   ```

2. **åˆ é™¤ç©ºç›®å½•**
   ```bash
   rm -rf src/utils/
   ```

3. **åˆ›å»ºé…ç½®ç›®å½•**
   ```bash
   mkdir src/config
   # åˆ›å»º site.ts, navigation.ts
   ```

#### ä¼˜å…ˆçº§ P1 (è¿‘æœŸæ‰§è¡Œ)

4. **ä¼˜åŒ– lib/utils**
   - å°† `lib/utils.ts` æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶
   - æŒ‰åŠŸèƒ½åˆ†ç±»ï¼šformatã€storageã€dateã€validation

5. **æ·»åŠ ç»„ä»¶å¯¼å‡ºæ–‡ä»¶**
   ```typescript
   // src/components/chat/index.ts
   export { ChatArea } from './ChatArea'
   export { ChatBubble } from './ChatBubble'
   export { ChatInputArea } from './ChatInputArea'
   ```

6. **å®Œå–„æ–‡æ¡£**
   - æ›´æ–° README.md çš„ç›®å½•ç»“æ„è¯´æ˜
   - æ·»åŠ ç»„ä»¶ä½¿ç”¨æ–‡æ¡£

#### ä¼˜å…ˆçº§ P2 (é•¿æœŸè§„åˆ’)

7. **è€ƒè™‘ Feature-Based é‡æ„**
   - è¯„ä¼°é¡¹ç›®è§„æ¨¡å’Œå›¢é˜Ÿéœ€æ±‚
   - åˆ¶å®šé‡æ„è®¡åˆ’
   - é€æ­¥è¿ç§»

8. **æ·»åŠ æµ‹è¯•ç›®å½•**
   ```
   src/
   â””â”€â”€ __tests__/
       â”œâ”€â”€ components/
       â”œâ”€â”€ hooks/
       â””â”€â”€ utils/
   ```

---

### 3.5 å¯¹æ¯”è¯„åˆ†

| è¯„ä¼°ç»´åº¦ | å½“å‰é¡¹ç›® | æ¡ˆä¾‹ 1 (Next.js) | æ¡ˆä¾‹ 2 (Bulletproof) | æ¡ˆä¾‹ 3 (Taxonomy) |
|---------|---------|-----------------|---------------------|------------------|
| **ç»„ä»¶ç»„ç»‡** | 6/10 | 8/10 | 9/10 | 8/10 |
| **ç±»å‹å®‰å…¨** | 9/10 | 9/10 | 9/10 | 8/10 |
| **çŠ¶æ€ç®¡ç†** | 9/10 | 7/10 | 8/10 | 7/10 |
| **å›½é™…åŒ–** | 10/10 â­ | 6/10 | 6/10 | 5/10 |
| **å¯æ‰©å±•æ€§** | 7/10 | 8/10 | 10/10 â­ | 7/10 |
| **é…ç½®ç®¡ç†** | 5/10 | 7/10 | 7/10 | 9/10 â­ |
| **å·¥å…·å‡½æ•°** | 6/10 | 8/10 | 9/10 | 8/10 |
| **ä»£ç å¤ç”¨** | 7/10 | 8/10 | 9/10 | 8/10 |
| **å›¢é˜Ÿåä½œ** | 7/10 | 8/10 | 10/10 â­ | 8/10 |
| **å­¦ä¹ æ›²çº¿** | 7/10 | 7/10 | 6/10 | 8/10 â­ |
| **ç»¼åˆè¯„åˆ†** | **7.3/10** | **7.6/10** | **8.7/10** | **7.6/10** |

---

## 4. æ€»ç»“ä¸è¡ŒåŠ¨è®¡åˆ’

### 4.1 å½“å‰é¡¹ç›®çš„äº®ç‚¹ â­

1. **å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒ** (3 è¯­è¨€ Ã— 4 å‘½åç©ºé—´)
2. **å®Œå–„çš„çŠ¶æ€ç®¡ç†** (7 ä¸ªç‹¬ç«‹ store)
3. **shadcn UI è§„èŒƒä½¿ç”¨**
4. **TypeScript ç±»å‹å®‰å…¨**
5. **æ¨¡å—åŒ– API è®¾è®¡**

### 4.2 éœ€è¦æ”¹è¿›çš„åœ°æ–¹ âš ï¸

1. **ç»„ä»¶ç›®å½•æ‰å¹³åŒ–** â†’ éœ€è¦æŒ‰åŠŸèƒ½åˆ†ç»„
2. **ç¼ºä¹é…ç½®ç®¡ç†** â†’ æ·»åŠ  config ç›®å½•
3. **å·¥å…·å‡½æ•°æ··ä¹±** â†’ ä¼˜åŒ– lib/utils ç»“æ„
4. **ç©ºç›®å½•å­˜åœ¨** â†’ åˆ é™¤ utils/ ç›®å½•

### 4.3 æ¨èè¡ŒåŠ¨è®¡åˆ’

**ç¬¬ä¸€é˜¶æ®µ (1-2 å‘¨)**: æ¸©å’Œé‡æ„
- âœ… ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç»„
- âœ… åˆ›å»º config ç›®å½•
- âœ… ä¼˜åŒ– lib/utils
- âœ… æ›´æ–°æ–‡æ¡£

**ç¬¬äºŒé˜¶æ®µ (1 ä¸ªæœˆ)**: é€æ­¥ä¼˜åŒ–
- æ·»åŠ ç»„ä»¶å¯¼å‡ºæ–‡ä»¶
- å®Œå–„å·¥å…·å‡½æ•°åˆ†ç±»
- æ·»åŠ é…ç½®æ–‡ä»¶

**ç¬¬ä¸‰é˜¶æ®µ (é•¿æœŸ)**: æ¶æ„å‡çº§
- è¯„ä¼° Feature-Based æ¶æ„
- åˆ¶å®šè¿ç§»è®¡åˆ’
- é€æ­¥é‡æ„

### 4.4 æœ€ç»ˆå»ºè®®

åŸºäºå½“å‰é¡¹ç›®çš„æŠ€æœ¯æ ˆå’Œè§„æ¨¡ï¼Œ**æ¨èé‡‡ç”¨æ–¹æ¡ˆ A (æ¸©å’Œé‡æ„)**:

1. **ä¿æŒæ ¸å¿ƒæ¶æ„**: apiã€storeã€typesã€i18n ç­‰ç›®å½•ä¿æŒä¸å˜
2. **ä¼˜åŒ–ç»„ä»¶ç»„ç»‡**: æŒ‰åŠŸèƒ½åˆ†ç»„ï¼Œæé«˜å¯ç»´æŠ¤æ€§
3. **æ·»åŠ é…ç½®ç®¡ç†**: é›†ä¸­ç®¡ç†é…ç½®æ–‡ä»¶
4. **å®Œå–„å·¥å…·å‡½æ•°**: ä¼˜åŒ– lib ç›®å½•ç»“æ„

è¿™æ ·æ—¢èƒ½è§£å†³å½“å‰é—®é¢˜,åˆä¸ä¼šé€ æˆå¤ªå¤§çš„å˜åŠ¨ï¼Œé€‚åˆé¡¹ç›®çš„å½“å‰é˜¶æ®µã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-13  
**ä½œè€…**: AI Assistant  
**é¡¹ç›®**: IM Agents Web

