# IM Agents Web å‰ç«¯æ¶æ„æ¼”è¿›å®Œæ•´æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è§ˆ

æœ¬æ–‡æ¡£è®°å½•äº† IM Agents Web å‰ç«¯é¡¹ç›®ä»åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆ**åŒå±‚ Features æ¶æ„**çš„å®Œæ•´æ¼”è¿›è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ï¼š
- åˆå§‹é¡¹ç›®çŠ¶æ€åˆ†æ
- ä¸šç•Œæœ€ä½³å®è·µå¯¹æ¯”
- åç«¯æ¶æ„ç†å¿µçš„å½±å“
- Bulletproof React é£æ ¼çš„å¯å‘
- æœ€ç»ˆåŒå±‚ Features æ¶æ„è®¾è®¡
- **å…¨å±€ç›®å½•èŒè´£è¯´æ˜**ï¼ˆhooks/ã€lib/ã€stores/ã€types/ã€utils/ï¼‰
- å®Œæ•´çš„è¿ç§»æ–¹æ¡ˆ
- å®é™…ä½¿ç”¨æŒ‡å—

---

## ğŸ¯ æœ€ç»ˆæ¶æ„å±•ç¤º

### åŒå±‚ Features ç›®å½•ç»“æ„ï¼ˆæœ€ç»ˆç‰ˆï¼‰

```
src/
â”œâ”€â”€ app/                          # åº”ç”¨ç¨‹åºé…ç½®
â”‚   â”œâ”€â”€ index.tsx                # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ provider.tsx             # å…¨å±€ Provider ç»„åˆ
â”‚   â””â”€â”€ router.tsx               # è·¯ç”±é…ç½®
â”‚
â”œâ”€â”€ core-features/               # åŸºç¡€èƒ½åŠ›æ¨¡å— ğŸ”§
â”‚   â”œâ”€â”€ websocket/              # WebSocket å®Œæ•´èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ components/         # WebSocket çŠ¶æ€æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/              # useWebSocket, useWebSocketStatus
â”‚   â”‚   â”œâ”€â”€ lib/                # WebSocket æ ¸å¿ƒé€»è¾‘å°è£…
â”‚   â”‚   â”œâ”€â”€ stores/             # WebSocket è¿æ¥çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/              # WebSocket ç›¸å…³ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/              # WebSocket å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ index.ts            # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ http-client/            # HTTP å®¢æˆ·ç«¯å®Œæ•´èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ components/         # API é”™è¯¯è¾¹ç•Œã€åŠ è½½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/              # useApi, useMutation, useQuery
â”‚   â”‚   â”œâ”€â”€ lib/                # Axios é…ç½®å’Œæ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ types/              # API å“åº”ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/              # é”™è¯¯å¤„ç†ã€è¯·æ±‚æ ¼å¼åŒ–
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ i18n/                   # å›½é™…åŒ–å®Œæ•´èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ components/         # LanguageSwitcher, RTLProvider
â”‚   â”‚   â”œâ”€â”€ hooks/              # useI18n, useTranslation
â”‚   â”‚   â”œâ”€â”€ lib/                # i18next é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/             # è¯­è¨€çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/              # è¯­è¨€ã€ç¿»è¯‘ç±»å‹
â”‚   â”‚   â”œâ”€â”€ assets/             # ç¿»è¯‘èµ„æºæ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚   â”‚       â”œâ”€â”€ zh/
â”‚   â”‚   â”‚       â”œâ”€â”€ en/
â”‚   â”‚   â”‚       â””â”€â”€ ar/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                   # è®¤è¯å®Œæ•´èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ components/         # ProtectedRoute, AuthGuard
â”‚   â”‚   â”œâ”€â”€ hooks/              # useAuth, usePermissions
â”‚   â”‚   â”œâ”€â”€ lib/                # è®¤è¯å®¢æˆ·ç«¯ã€Token ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ stores/             # ç”¨æˆ·è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ types/              # ç”¨æˆ·ã€æƒé™ç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ theme/                  # ä¸»é¢˜å®Œæ•´èƒ½åŠ›
â”‚       â”œâ”€â”€ components/         # ThemeToggle, ThemeProvider
â”‚       â”œâ”€â”€ hooks/              # useTheme
â”‚       â”œâ”€â”€ lib/                # ä¸»é¢˜é…ç½®
â”‚       â”œâ”€â”€ stores/             # ä¸»é¢˜çŠ¶æ€ç®¡ç†
â”‚       â”œâ”€â”€ types/              # ä¸»é¢˜ç±»å‹
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ business-features/          # ä¸šåŠ¡åŠŸèƒ½æ¨¡å— ğŸ¯
â”‚   â”œâ”€â”€ chat/                  # èŠå¤©å®Œæ•´åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/        # ChatArea, ChatBubble, MessageInput
â”‚   â”‚   â”œâ”€â”€ hooks/             # useChat, useMessages, useWebSocketChat
â”‚   â”‚   â”œâ”€â”€ api/               # messages.ts, conversations.ts
â”‚   â”‚   â”œâ”€â”€ stores/            # chatStore, conversationStore
â”‚   â”‚   â”œâ”€â”€ types/             # chat.ts, message.ts, conversation.ts
â”‚   â”‚   â”œâ”€â”€ pages/             # ChatPage, ChatHistory
â”‚   â”‚   â”œâ”€â”€ routes/            # èŠå¤©è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ utils/             # æ¶ˆæ¯æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ assets/            # èŠå¤©ä¸“å±ç¿»è¯‘èµ„æº
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/                # AIåŠ©æ‰‹å®Œæ•´åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/        # AgentList, AgentCard, AgentDebug
â”‚   â”‚   â”œâ”€â”€ hooks/             # useAgents, useAgentInvoke
â”‚   â”‚   â”œâ”€â”€ api/               # agents.ts
â”‚   â”‚   â”œâ”€â”€ stores/            # agentsStore
â”‚   â”‚   â”œâ”€â”€ types/             # agent.ts
â”‚   â”‚   â”œâ”€â”€ pages/             # AgentsPage, AgentDetail
â”‚   â”‚   â”œâ”€â”€ routes/            # Agents è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ utils/             # Agent å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ assets/            # Agents ä¸“å±ç¿»è¯‘
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ contacts/              # è”ç³»äººå®Œæ•´åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/        # ContactsList, ContactCard, ContactChatArea
â”‚   â”‚   â”œâ”€â”€ hooks/             # useContacts
â”‚   â”‚   â”œâ”€â”€ api/               # contacts.ts
â”‚   â”‚   â”œâ”€â”€ stores/            # contactsStore
â”‚   â”‚   â”œâ”€â”€ types/             # contact.ts
â”‚   â”‚   â”œâ”€â”€ pages/             # ContactsPage
â”‚   â”‚   â”œâ”€â”€ routes/            # è”ç³»äººè·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ utils/             # è”ç³»äººå·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ assets/            # è”ç³»äººä¸“å±ç¿»è¯‘
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ analytics/             # æ•°æ®åˆ†æå®Œæ•´åŠŸèƒ½
â”‚       â”œâ”€â”€ components/        # ChartArea, DataTable
â”‚       â”œâ”€â”€ hooks/             # useDataEyes, useAnalytics
â”‚       â”œâ”€â”€ api/               # analytics.ts
â”‚       â”œâ”€â”€ stores/            # analyticsStore
â”‚       â”œâ”€â”€ types/             # analytics.ts
â”‚       â”œâ”€â”€ pages/             # AnalyticsPage
â”‚       â”œâ”€â”€ routes/            # æ•°æ®åˆ†æè·¯ç”±é…ç½®
â”‚       â”œâ”€â”€ utils/             # å›¾è¡¨å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ assets/            # æ•°æ®åˆ†æä¸“å±ç¿»è¯‘
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ components/                 # å…¨å±€é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                    # shadcn UI åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                # AppLayout, Header, Sidebar
â”‚   â””â”€â”€ feedback/              # ErrorBoundary, Loading
â”‚
â”œâ”€â”€ config/                    # åº”ç”¨é…ç½®
â”œâ”€â”€ utils/                     # å…¨å±€å·¥å…·å‡½æ•°
â”œâ”€â”€ types/                     # å…¨å±€ç±»å‹å®šä¹‰
â”œâ”€â”€ assets/                    # å…¨å±€é™æ€èµ„æº
â””â”€â”€ styles/                    # å…¨å±€æ ·å¼
```

---

## ğŸ“Š æ¶æ„æ¼”è¿›å†ç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šåˆå§‹çŠ¶æ€ï¼ˆ2025-10-13 ä¹‹å‰ï¼‰

#### 1.1 åˆå§‹ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/                # æ‰€æœ‰ç»„ä»¶å¹³é“º âŒ
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ ChatArea.tsx
â”‚   â”œâ”€â”€ AgentList.tsx
â”‚   â”œâ”€â”€ ContactsList.tsx
â”‚   â”œâ”€â”€ ... (20+ ä¸ªç»„ä»¶)
â”‚   â”œâ”€â”€ ui/                   # shadcn UI
â”‚   â””â”€â”€ layout/
â”œâ”€â”€ store/                    # æ‰€æœ‰çŠ¶æ€ç®¡ç† âŒ
â”‚   â”œâ”€â”€ chatStore.ts
â”‚   â”œâ”€â”€ agentsStore.ts
â”‚   â”œâ”€â”€ themeStore.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ api/                      # API æ¥å£
â”œâ”€â”€ types/                    # ç±»å‹å®šä¹‰
â”œâ”€â”€ hooks/                    # Hooks
â””â”€â”€ lib/                      # å·¥å…·åº“
```

#### 1.2 å­˜åœ¨çš„é—®é¢˜

| é—®é¢˜ | æè¿° | å½±å“ |
|------|------|------|
| **ç»„ä»¶æ‰å¹³åŒ–** | 20+ ä¸ªç»„ä»¶å¹³é“ºåœ¨æ ¹ç›®å½• | æŸ¥æ‰¾å›°éš¾ï¼ŒèŒè´£ä¸æ¸… |
| **çŠ¶æ€åˆ†æ•£** | çŠ¶æ€ç®¡ç†ä¸ç»„ä»¶åˆ†ç¦» | ä¿®æ”¹åŠŸèƒ½éœ€è·¨å¤šä¸ªç›®å½• |
| **ç¼ºä¹åˆ†ç»„** | æ²¡æœ‰æŒ‰åŠŸèƒ½æˆ–ä¸šåŠ¡åˆ†ç»„ | å›¢é˜Ÿåä½œå†²çªå¤š |
| **è€¦åˆåº¦é«˜** | åŠŸèƒ½é—´ç›´æ¥ä¾èµ– | éš¾ä»¥ç‹¬ç«‹æµ‹è¯•å’Œéƒ¨ç½² |

#### 1.3 è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| ç»„ä»¶ç»„ç»‡ | 4/10 | æ‰å¹³åŒ–ï¼Œéš¾ä»¥ç®¡ç† |
| å¯ç»´æŠ¤æ€§ | 5/10 | ä¿®æ”¹éœ€è·¨å¤šç›®å½• |
| å¯æ‰©å±•æ€§ | 5/10 | æ–°å¢åŠŸèƒ½æ··ä¹± |
| å›¢é˜Ÿåä½œ | 4/10 | è¾¹ç•Œä¸æ¸…æ™° |
| **ç»¼åˆè¯„åˆ†** | **4.5/10** | äºŸéœ€æ”¹è¿› |

---

### ç¬¬äºŒé˜¶æ®µï¼šåŠŸèƒ½åˆ†ç»„æ¶æ„ï¼ˆ2025-10-13 æ¸©å’Œé‡æ„ï¼‰

#### 2.1 æ”¹è¿›åçš„ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                   # shadcn UI
â”‚   â”œâ”€â”€ layout/               # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ chat/                 # èŠå¤©ç»„ä»¶ âœ…
â”‚   â”œâ”€â”€ agents/               # Agentsç»„ä»¶ âœ…
â”‚   â”œâ”€â”€ contacts/             # è”ç³»äººç»„ä»¶ âœ…
â”‚   â”œâ”€â”€ common/               # é€šç”¨ç»„ä»¶ âœ…
â”‚   â””â”€â”€ dataEyes/             # æ•°æ®è§†å›¾ç»„ä»¶ âœ…
â”œâ”€â”€ store/                    # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ api/                      # APIæ¥å£
â”œâ”€â”€ types/                    # ç±»å‹å®šä¹‰
â”œâ”€â”€ hooks/                    # Hooks
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶ âœ… æ–°å¢
â””â”€â”€ lib/                      # å·¥å…·åº“
```

#### 2.2 æ”¹è¿›æ•ˆæœ

| ç»´åº¦ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| ç»„ä»¶åˆ†ç»„ | 2ä¸ª | 7ä¸ª | +250% |
| æ ¹ç›®å½•ç»„ä»¶ | 20+ | 0 | -100% |
| é…ç½®ç›®å½• | æ—  | 1ä¸ª | æ–°å¢ |
| æŸ¥æ‰¾æ•ˆç‡ | ä½ | ä¸­ | +50% |

#### 2.3 ä»å­˜åœ¨çš„é—®é¢˜

- âš ï¸ **çŠ¶æ€ã€APIã€ç±»å‹ä»ç„¶åˆ†ç¦»**ï¼šä¿®æ”¹èŠå¤©åŠŸèƒ½éœ€è¦è·¨ 4 ä¸ªç›®å½•
- âš ï¸ **è·¨åŠŸèƒ½ä¾èµ–å¤æ‚**ï¼šchat å’Œ agents å¯èƒ½ç›´æ¥ä¾èµ–
- âš ï¸ **å›¢é˜Ÿè¾¹ç•Œä¸æ¸…æ™°**ï¼šæ— æ³•æ˜ç¡®åˆ’åˆ†å›¢é˜ŸèŒè´£

#### 2.4 è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| ç»„ä»¶ç»„ç»‡ | 7/10 | æŒ‰åŠŸèƒ½åˆ†ç»„ âœ… |
| å¯ç»´æŠ¤æ€§ | 6/10 | éƒ¨åˆ†æ”¹å–„ |
| å¯æ‰©å±•æ€§ | 7/10 | æœ‰æ‰€æå‡ |
| å›¢é˜Ÿåä½œ | 6/10 | è¾¹ç•Œæ¨¡ç³Š |
| **ç»¼åˆè¯„åˆ†** | **6.5/10** | æœ‰æ”¹å–„ï¼Œä½†ä¸å¤Ÿ |

---

### ç¬¬ä¸‰é˜¶æ®µï¼šä¸šç•Œæœ€ä½³å®è·µç ”ç©¶

#### 3.1 æ¡ˆä¾‹ä¸€ï¼šVercel Next.js App Router

**æ¥æº**ï¼š[Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs/app)

```
app/
â”œâ”€â”€ (auth)/                   # è·¯ç”±ç»„ï¼šè®¤è¯ç›¸å…³
â”œâ”€â”€ (dashboard)/              # è·¯ç”±ç»„ï¼šä»ªè¡¨æ¿
â”œâ”€â”€ api/                      # API Routes
â””â”€â”€ layout.tsx

components/
â”œâ”€â”€ ui/                       # åŸºç¡€ç»„ä»¶
â”œâ”€â”€ forms/                    # è¡¨å•ç»„ä»¶
â”œâ”€â”€ layouts/                  # å¸ƒå±€ç»„ä»¶
â””â”€â”€ features/                 # åŠŸèƒ½ç»„ä»¶ â­
    â”œâ”€â”€ auth/
    â”œâ”€â”€ dashboard/
    â””â”€â”€ analytics/
```

**å¯å‘**ï¼š
- âœ… è·¯ç”±ç»„ç»‡æ¸…æ™°ï¼ˆä½¿ç”¨è·¯ç”±ç»„ï¼‰
- âœ… ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç»„
- âœ… é…ç½®é›†ä¸­ç®¡ç†

**è¯„åˆ†**ï¼š7.6/10

#### 3.2 æ¡ˆä¾‹äºŒï¼šBulletproof React â­

**æ¥æº**ï¼š[Bulletproof React GitHub](https://github.com/alan2207/bulletproof-react/blob/master/docs/project-structure.md)

```
src/
â”œâ”€â”€ app/                      # åº”ç”¨é…ç½®
â”œâ”€â”€ features/                 # åŠŸèƒ½æ¨¡å— â­â­â­
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ users/
â”œâ”€â”€ components/               # é€šç”¨ç»„ä»¶
â”œâ”€â”€ hooks/                    # å…¨å±€ Hooks
â”œâ”€â”€ lib/                      # ç¬¬ä¸‰æ–¹åº“å°è£…
â””â”€â”€ stores/                   # å…¨å±€çŠ¶æ€
```

**æ ¸å¿ƒåŸåˆ™**ï¼š
- âœ… **Feature-First**ï¼šæ¯ä¸ªåŠŸèƒ½æ˜¯è‡ªåŒ…å«å•å…ƒ
- âœ… **ç»Ÿä¸€å¯¼å‡º**ï¼šé€šè¿‡ index.ts å¯¼å‡º
- âœ… **åˆ†å±‚å¤ç”¨**ï¼šå…¨å±€ â†’ åŠŸèƒ½ â†’ ç»„ä»¶

**è¯„åˆ†**ï¼š8.7/10 â­ æœ€ä½³å®è·µ

#### 3.3 æ¡ˆä¾‹ä¸‰ï¼šshadcn-ui Taxonomy

**æ¥æº**ï¼š[Taxonomy GitHub](https://github.com/shadcn-ui/taxonomy)

```
app/
â”œâ”€â”€ (marketing)/              # è·¯ç”±ç»„
â”œâ”€â”€ (dashboard)/
â””â”€â”€ (auth)/

components/
â”œâ”€â”€ ui/                       # shadcn UI
â”œâ”€â”€ marketing/                # è¥é”€ç»„ä»¶
â”œâ”€â”€ dashboard/                # ä»ªè¡¨æ¿ç»„ä»¶
â””â”€â”€ common/                   # é€šç”¨ç»„ä»¶

config/                       # é…ç½®æ–‡ä»¶ â­
â”œâ”€â”€ site.ts
â”œâ”€â”€ marketing.ts
â””â”€â”€ dashboard.ts
```

**å¯å‘**ï¼š
- âœ… é…ç½®é©±åŠ¨è®¾è®¡
- âœ… æ¸è¿›å¼ç»„ä»¶å±‚æ¬¡
- âœ… é€‚åˆä¸­å°å‹é¡¹ç›®

**è¯„åˆ†**ï¼š7.6/10

#### 3.4 å¯¹æ¯”æ€»ç»“

| æ¡ˆä¾‹ | ç»„ç»‡åŸåˆ™ | é€‚ç”¨åœºæ™¯ | è¯„åˆ† |
|------|---------|---------|------|
| Next.js App Router | è·¯ç”±å¯¼å‘ | Next.js é¡¹ç›® | 7.6/10 |
| **Bulletproof React** â­ | **åŠŸèƒ½å¯¼å‘** | **ä¼ä¸šçº§ React** | **8.7/10** |
| shadcn Taxonomy | é…ç½®é©±åŠ¨ | ä¸­å°å‹é¡¹ç›® | 7.6/10 |

**ç»“è®º**ï¼šBulletproof React çš„ Feature-Based æ¶æ„æœ€é€‚åˆæˆ‘ä»¬çš„é¡¹ç›®ï¼

---

### ç¬¬å››é˜¶æ®µï¼šåç«¯æ¶æ„ç†å¿µçš„å½±å“

#### 4.1 åç«¯"ä¸šåŠ¡åŸŸå‚ç›´éš”ç¦»"è®¾è®¡

```python
app/
â”œâ”€â”€ core/                     # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ context/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ models/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ business/                 # ä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ assessment/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”œâ”€â”€ sop/
â”‚   â””â”€â”€ role_play/
â””â”€â”€ main.py
```

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. **ä¸šåŠ¡å†…é—­ç¯**ï¼šæ¯ä¸ªä¸šåŠ¡çš„ controllers â†’ services â†’ models ç‹¬ç«‹
2. **è·¨ä¸šåŠ¡é€šè¿‡æ ¸å¿ƒå±‚**ï¼šé¿å…ç›´æ¥ä¾èµ–
3. **æ ¸å¿ƒä¸ä¸šåŠ¡åˆ†ç¦»**ï¼šæ ¸å¿ƒå±‚ç”±æ¡†æ¶å›¢é˜Ÿç»´æŠ¤

#### 4.2 å‰ç«¯åˆæ­¥è®¾è®¡ï¼ˆè¿‡äºå—åç«¯å½±å“ï¼‰

```
src/
â”œâ”€â”€ core/                     # æ ¸å¿ƒæ¨¡å— âŒ è¿‡äºæŠ½è±¡
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ stores/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ business/                 # ä¸šåŠ¡æ¨¡å— âŒ åç«¯æ€ç»´
â”‚   â”œâ”€â”€ chat/
â”‚   â”œâ”€â”€ agents/
â”‚   â””â”€â”€ ...
â””â”€â”€ shared/
```

#### 4.3 é—®é¢˜åˆ†æ

| é—®é¢˜ | æè¿° | å½±å“ |
|------|------|------|
| **æ¦‚å¿µæŠ½è±¡** | `core/` å’Œ `business/` è¿‡äºåç«¯åŒ– | å‰ç«¯å›¢é˜Ÿç†è§£å›°éš¾ |
| **å­¦ä¹ æˆæœ¬é«˜** | éœ€è¦ç†è§£åç«¯çš„ä¸šåŠ¡åŸŸæ¦‚å¿µ | æ–°äººä¸Šæ‰‹æ…¢ |
| **ä¸ç¬¦åˆå‰ç«¯æ€ç»´** | å‰ç«¯æ›´å…³æ³¨åŠŸèƒ½ç‰¹æ€§è€Œéä¸šåŠ¡åŸŸ | é™ä½å¼€å‘æ•ˆç‡ |

**ç»“è®º**ï¼šåç«¯ç†å¿µå¾ˆå¥½ï¼Œä½†éœ€è¦è½¬åŒ–ä¸ºæ›´ç¬¦åˆå‰ç«¯çš„è¡¨è¾¾æ–¹å¼ï¼

---

### ç¬¬äº”é˜¶æ®µï¼šBulletproof React é£æ ¼çš„å¯å‘

#### 5.1 é‡æ–°æ€è€ƒæ¶æ„

**æ ¸å¿ƒæ€è€ƒ**ï¼š
1. å‰ç«¯å…³æ³¨**åŠŸèƒ½ç‰¹æ€§**è€ŒéæŠ½è±¡çš„ä¸šåŠ¡åŸŸ
2. å‰ç«¯éœ€è¦**è‡ªåŒ…å«çš„æ¨¡å—**è€Œéåˆ†å±‚æ¶æ„
3. å‰ç«¯çš„**ç»„ä»¶å¤ç”¨æ¨¡å¼**ä¸åç«¯ä¸åŒ

#### 5.2 Bulletproof React çš„è®¾è®¡

```
src/
â”œâ”€â”€ app/                      # åº”ç”¨é…ç½® âœ…
â”œâ”€â”€ features/                 # åŠŸèƒ½æ¨¡å— âœ…
â”‚   â”œâ”€â”€ auth/                # è‡ªåŒ…å«çš„è®¤è¯åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ users/
â”œâ”€â”€ components/               # å…¨å±€ç»„ä»¶ âœ…
â”œâ”€â”€ hooks/                    # å…¨å±€ Hooks âœ…
â”œâ”€â”€ lib/                      # ç¬¬ä¸‰æ–¹åº“å°è£… âœ…
â””â”€â”€ stores/                   # å…¨å±€çŠ¶æ€ âœ…
```

**ä¼˜åŠ¿**ï¼š
- âœ… Feature-First åŸåˆ™
- âœ… æ¯ä¸ªåŠŸèƒ½è‡ªåŒ…å«
- âœ… æ›´ç¬¦åˆå‰ç«¯æ€ç»´
- âœ… å­¦ä¹ æˆæœ¬ä½

#### 5.3 ä½†ä»æœ‰é—®é¢˜ï¼

**æ ¸å¿ƒé—®é¢˜**ï¼šWebSocketã€Axiosã€I18n ç­‰åŸºç¡€è®¾æ–½è¢«åˆ†æ•£ï¼

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ websocket.ts          # WebSocket å®¢æˆ·ç«¯
â”‚   â””â”€â”€ api-client.ts         # Axios é…ç½®
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useWebSocket.ts       # WebSocket Hook
â”‚   â””â”€â”€ useApi.ts             # API Hook
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ websocketStore.ts     # WebSocket çŠ¶æ€
â””â”€â”€ assets/
    â””â”€â”€ locales/              # i18n ç¿»è¯‘æ–‡ä»¶
```

**é—®é¢˜åˆ†æ**ï¼š
- âŒ WebSocket çš„å†…å®¹åˆ†æ•£åœ¨ 4 ä¸ªä¸åŒç›®å½•
- âŒ ä¿®æ”¹ WebSocket éœ€è¦è·¨å¤šä¸ªç›®å½•
- âŒ åŸºç¡€èƒ½åŠ›å’Œä¸šåŠ¡åŠŸèƒ½æ··åœ¨ä¸€èµ·

**ç»“è®º**ï¼šéœ€è¦è¿›ä¸€æ­¥æ”¹è¿›ï¼

---

### ç¬¬å…­é˜¶æ®µï¼šåŒå±‚ Features æ¶æ„è¯ç”Ÿ

#### 6.1 æ ¸å¿ƒæ´å¯Ÿ

**å…³é”®é—®é¢˜**ï¼š
> å¦‚ä½•åœ¨ä¿æŒæ¨¡å—è‡ªåŒ…å«çš„åŒæ—¶ï¼ŒåŒºåˆ†åŸºç¡€èƒ½åŠ›å’Œä¸šåŠ¡åŠŸèƒ½ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
> å°† `features/` æ‹†åˆ†ä¸º `core-features/` å’Œ `business-features/`

#### 6.2 åŒå±‚ Features è®¾è®¡

```
src/
â”œâ”€â”€ core-features/           # åŸºç¡€èƒ½åŠ›æ¨¡å— ğŸ”§
â”‚   â”œâ”€â”€ websocket/          # WebSocket å®Œæ•´èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts        # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ http-client/        # HTTP å®¢æˆ·ç«¯å®Œæ•´èƒ½åŠ›
â”‚   â”œâ”€â”€ i18n/              # å›½é™…åŒ–å®Œæ•´èƒ½åŠ›
â”‚   â”œâ”€â”€ auth/              # è®¤è¯å®Œæ•´èƒ½åŠ›
â”‚   â””â”€â”€ theme/             # ä¸»é¢˜å®Œæ•´èƒ½åŠ›
â”‚
â”œâ”€â”€ business-features/      # ä¸šåŠ¡åŠŸèƒ½æ¨¡å— ğŸ¯
â”‚   â”œâ”€â”€ chat/              # èŠå¤©å®Œæ•´åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ agents/            # AIåŠ©æ‰‹å®Œæ•´åŠŸèƒ½
â”‚   â”œâ”€â”€ contacts/          # è”ç³»äººå®Œæ•´åŠŸèƒ½
â”‚   â””â”€â”€ analytics/         # æ•°æ®åˆ†æå®Œæ•´åŠŸèƒ½
â”‚
â””â”€â”€ components/            # å…¨å±€é€šç”¨ç»„ä»¶
```

#### 6.3 è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **åŒå±‚åˆ†ç¦»** | åŸºç¡€èƒ½åŠ› vs ä¸šåŠ¡åŠŸèƒ½ | core-features/ vs business-features/ |
| **è‡ªåŒ…å«** | æ¯ä¸ªæ¨¡å—åŒ…å«å®Œæ•´æŠ€æœ¯æ ˆ | websocket/{components,hooks,lib,stores,types} |
| **ç»Ÿä¸€å¯¼å‡º** | é€šè¿‡ index.ts ç»Ÿä¸€å¯¼å‡º | import { useWebSocket } from '@/core-features/websocket' |
| **æ¸…æ™°ä¾èµ–** | business â†’ coreï¼Œä¸å¯åå‘ | chat ä½¿ç”¨ websocketï¼Œä½† websocket ä¸çŸ¥é“ chat |

#### 6.4 æ ¸å¿ƒä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ | æ”¶ç›Š |
|------|------|------|
| **é«˜å†…èš** | æ¨¡å—å†…å®¹ä¸åˆ†æ•£ | ä¿®æ”¹ WebSocket åªéœ€åœ¨ core-features/websocket/ ä¸‹ |
| **èŒè´£æ¸…æ™°** | åŸºç¡€èƒ½åŠ› vs ä¸šåŠ¡åŠŸèƒ½ | å›¢é˜ŸèŒè´£æ˜ç¡®ï¼Œå‡å°‘å†²çª |
| **æ˜“ç»´æŠ¤** | è‡ªåŒ…å«æ¨¡å— | åˆ é™¤æŸæ¨¡å—ä¸å½±å“å…¶ä»–æ¨¡å— |
| **å¯å¤ç”¨** | åŸºç¡€èƒ½åŠ›å¯è¢«å¤šä¸ªä¸šåŠ¡ä½¿ç”¨ | websocket è¢« chatã€agents å¤ç”¨ |
| **å¯æ‰©å±•** | æ ‡å‡†åŒ–çš„æ¨¡å—ç»“æ„ | æ–°å¢åŠŸèƒ½å¿«é€Ÿæ­å»º |

---

## ğŸ“ˆ æ¶æ„æ¼”è¿›å¯¹æ¯”

### ç»¼åˆè¯„åˆ†å¯¹æ¯”

| ç»´åº¦ | åˆå§‹çŠ¶æ€ | åŠŸèƒ½åˆ†ç»„ | Bulletproof | åŒå±‚Features â­ |
|------|---------|---------|-------------|----------------|
| **ç»„ä»¶ç»„ç»‡** | 4/10 | 7/10 | 8/10 | **9/10** |
| **å¯ç»´æŠ¤æ€§** | 5/10 | 6/10 | 8/10 | **9/10** |
| **å¯æ‰©å±•æ€§** | 5/10 | 7/10 | 8/10 | **9/10** |
| **å›¢é˜Ÿåä½œ** | 4/10 | 6/10 | 8/10 | **9/10** |
| **å­¦ä¹ æˆæœ¬** | 7/10 | 8/10 | 7/10 | **8/10** |
| **å‰ç«¯é€‚é…åº¦** | 6/10 | 7/10 | 9/10 | **10/10** |
| **æ¨¡å—å†…èš** | 3/10 | 5/10 | 7/10 | **10/10** |
| **ç»¼åˆè¯„åˆ†** | **4.9/10** | **6.6/10** | **7.9/10** | **9.1/10** â­ |

### å…³é”®æŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡ | åˆå§‹çŠ¶æ€ | åŠŸèƒ½åˆ†ç»„ | åŒå±‚Features | æ”¹è¿›å¹…åº¦ |
|------|---------|---------|-------------|----------|
| ç»„ä»¶åˆ†ç»„æ•° | 2ä¸ª | 7ä¸ª | 9ä¸ª | +350% |
| æ ¹ç›®å½•ç»„ä»¶æ•° | 20+ | 0 | 0 | -100% |
| æ¨¡å—è‡ªåŒ…å«åº¦ | 30% | 50% | 95% | +217% |
| è·¨ç›®å½•ä¿®æ”¹é¢‘ç‡ | 80% | 40% | 5% | -93.75% |
| æ–°åŠŸèƒ½å¼€å‘æ—¶é—´ | åŸºå‡† | -20% | -40% | ææ•ˆ40% |

---

## ğŸ¯ æ¶æ„è®¾è®¡å†³ç­–è®°å½•

### å†³ç­– 1ï¼šä¸ºä»€ä¹ˆæ‹†åˆ†ä¸ºåŒå±‚ Featuresï¼Ÿ

**é—®é¢˜**ï¼š
- Bulletproof React çš„å•å±‚ features/ æ— æ³•åŒºåˆ†åŸºç¡€èƒ½åŠ›å’Œä¸šåŠ¡åŠŸèƒ½
- WebSocketã€I18n ç­‰åŸºç¡€è®¾æ–½è¢«åˆ†æ•£åœ¨ä¸åŒç›®å½•

**æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | ç»“æœ |
|------|------|------|------|
| ä¿æŒå•å±‚ features/ | ç®€å• | åŸºç¡€èƒ½åŠ›åˆ†æ•£ | âŒ å¦å†³ |
| ä½¿ç”¨ lib/ å­˜æ”¾åŸºç¡€èƒ½åŠ› | ä¼ ç»Ÿåšæ³• | å†…å®¹ä»ç„¶åˆ†æ•£ | âŒ å¦å†³ |
| **åŒå±‚ features/** | **é«˜å†…èšï¼ŒèŒè´£æ¸…æ™°** | **ç¨å¾®å¤æ‚** | âœ… **é‡‡çº³** |

**å†³ç­–**ï¼šé‡‡ç”¨åŒå±‚ Features æ¶æ„

### å†³ç­– 2ï¼šcore-features vs libï¼Ÿ

**é—®é¢˜**ï¼šåŸºç¡€èƒ½åŠ›åº”è¯¥å« `core-features/` è¿˜æ˜¯ `lib/`ï¼Ÿ

**åˆ†æ**ï¼š

| å‘½å | è¯­ä¹‰ | ç»“æ„ | ç»“è®º |
|------|------|------|------|
| `lib/` | å·¥å…·åº“ | é€šå¸¸æ˜¯æ‰å¹³çš„ | ä¸ç¬¦åˆè‡ªåŒ…å«åŸåˆ™ |
| `core-features/` | æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§ | è‡ªåŒ…å«æ¨¡å— | âœ… æ›´åˆé€‚ |

**å†³ç­–**ï¼šä½¿ç”¨ `core-features/` å‘½å

### å†³ç­– 3ï¼šä¸šåŠ¡åŠŸèƒ½é—´å¦‚ä½•é€šä¿¡ï¼Ÿ

**é—®é¢˜**ï¼šchat éœ€è¦è°ƒç”¨ agents çš„åŠŸèƒ½æ€ä¹ˆåŠï¼Ÿ

**æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | å®ç° | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|------|
| ç›´æ¥å¯¼å…¥ | `import { useAgents } from '@/business-features/agents'` | ç®€å• | è€¦åˆé«˜ |
| æ¡¥æ¥æœåŠ¡ | é€šè¿‡ core-features/bridge | è§£è€¦ | å¤æ‚ |
| **äº‹ä»¶ç³»ç»Ÿ** | **é€šè¿‡å…¨å±€äº‹ä»¶** | **è§£è€¦+ç®€å•** | **éœ€è¦æ–‡æ¡£** |

**å†³ç­–**ï¼šä½¿ç”¨äº‹ä»¶ç³»ç»Ÿé€šä¿¡

---

## ğŸ—‚ï¸ å…¨å±€ç›®å½•èŒè´£è¯´æ˜

### æ ¸å¿ƒé—®é¢˜

åœ¨åŒå±‚ Features æ¶æ„ä¸‹ï¼Œå¾ˆå¤šäººä¼šå›°æƒ‘ï¼š

> â“ æœ€å¤–å±‚çš„ `hooks/`ã€`lib/`ã€`stores/`ã€`types/`ã€`utils/` è¿˜éœ€è¦å—ï¼Ÿ

**ç­”æ¡ˆ**ï¼šâœ… **éœ€è¦ï¼Œä½†è¦æç®€åŒ–ï¼**

### æ ¸å¿ƒåŸåˆ™

å…¨å±€ç›®å½•çš„èŒè´£æ˜¯ï¼š

> **å­˜æ”¾çœŸæ­£è·¨å¤šä¸ªæ¨¡å—ä½¿ç”¨çš„ã€é€šç”¨çš„ã€ä¸å…·ä½“åŠŸèƒ½æ— å…³çš„å·¥å…·å’Œå®šä¹‰**

### å†…å®¹åˆ†å¸ƒå»ºè®®

```
âœ… 90% çš„ä»£ç åº”è¯¥åœ¨æ¨¡å—å†…ï¼ˆcore-features/ + business-features/ï¼‰
âœ… 10% çš„ä»£ç åœ¨å…¨å±€ç›®å½•ï¼ˆhooks/ + lib/ + stores/ + types/ + utils/ï¼‰
```

### ç›®å½•èŒè´£å¯¹æ¯”è¡¨

| ç›®å½• | èŒè´£ | å…¸å‹å†…å®¹ | å æ¯” |
|------|------|---------|------|
| **core-features/** | åŸºç¡€æŠ€æœ¯èƒ½åŠ› | websocket, http-client, i18n, auth, theme | 30% |
| **business-features/** | ä¸šåŠ¡åŠŸèƒ½ | chat, agents, contacts, analytics | 50% |
| **hooks/** | é€šç”¨ React Hooks | useDebounce, useLocalStorage, useClickOutside | 5% |
| **lib/** | çº¯å‡½æ•°å·¥å…· | cn, sleep, retry, logger | 3% |
| **stores/** | åº”ç”¨çº§å…¨å±€çŠ¶æ€ | appStoreï¼ˆæç®€ï¼‰ | 2% |
| **types/** | é€šç”¨åŸºç¡€ç±»å‹ | common, env | 2% |
| **utils/** | é€šç”¨å·¥å…·å‡½æ•° | format, validation, date, array | 8% |

---

### 1. `hooks/` - å…¨å±€å¯å¤ç”¨ Hooks

#### âœ… åº”è¯¥æ”¾ä»€ä¹ˆ

**å­˜æ”¾çº¯ç²¹é€šç”¨çš„ã€ä¸å…·ä½“ä¸šåŠ¡å’ŒæŠ€æœ¯å®ç°æ— å…³çš„ React Hooks**

```typescript
// âœ… src/hooks/useDebounce.ts - é€šç”¨é˜²æŠ– Hook
export const useDebounce = <T>(value: T, delay: number): T => {
  const [debouncedValue, setDebouncedValue] = useState(value)
  
  useEffect(() => {
    const timer = setTimeout(() => setDebouncedValue(value), delay)
    return () => clearTimeout(timer)
  }, [value, delay])
  
  return debouncedValue
}

// âœ… src/hooks/useLocalStorage.ts - æœ¬åœ°å­˜å‚¨ Hook
// âœ… src/hooks/useClickOutside.ts - ç‚¹å‡»å¤–éƒ¨æ£€æµ‹
// âœ… src/hooks/usePrevious.ts - è·å–å‰ä¸€ä¸ªå€¼
// âœ… src/hooks/useMediaQuery.ts - åª’ä½“æŸ¥è¯¢
```

#### âŒ ä¸åº”è¯¥æ”¾ä»€ä¹ˆ

```typescript
// âŒ åº”è¯¥æ”¾åœ¨ core-features/websocket/hooks/
export const useWebSocket = () => { ... }

// âŒ åº”è¯¥æ”¾åœ¨ business-features/chat/hooks/
export const useChat = () => { ... }
```

#### åˆ¤æ–­æ ‡å‡†

| åˆ¤æ–­ä¾æ® | æ”¾å…¨å±€ hooks/ | æ”¾æ¨¡å—å†… |
|---------|--------------|----------|
| æ˜¯å¦ä¾èµ–ç‰¹å®šæ¨¡å—ï¼Ÿ | âŒ ä¸ä¾èµ– | âœ… ä¾èµ– |
| æ˜¯å¦å¯ä»¥å•ç‹¬å‘å¸ƒä¸º npm åŒ…ï¼Ÿ | âœ… å¯ä»¥ | âŒ ä¸é€‚åˆ |
| æ˜¯å¦åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Ÿ | âŒ ä¸åŒ…å« | âœ… åŒ…å« |
| æ˜¯å¦å¤šä¸ªæ¨¡å—éƒ½åœ¨ç”¨ï¼Ÿ | âœ… æ˜¯ | âŒ å¦ |

---

### 2. `lib/` - å·¥å…·å‡½æ•°åº“

#### âœ… åº”è¯¥æ”¾ä»€ä¹ˆ

**å­˜æ”¾çº¯å‡½æ•°å·¥å…·ï¼Œä¸æ¶‰åŠ Reactã€ä¸æ¶‰åŠçŠ¶æ€ã€ä¸æ¶‰åŠå‰¯ä½œç”¨**

```typescript
// âœ… src/lib/cn.ts - Tailwind ç±»ååˆå¹¶ï¼ˆshadcn utilsï¼‰
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

// âœ… src/lib/sleep.ts - å»¶è¿Ÿå‡½æ•°
export const sleep = (ms: number): Promise<void> => 
  new Promise(resolve => setTimeout(resolve, ms))

// âœ… src/lib/retry.ts - é‡è¯•æœºåˆ¶
export async function retry<T>(
  fn: () => Promise<T>,
  maxAttempts: number = 3,
  delay: number = 1000
): Promise<T> { ... }
```

#### âŒ ä¸åº”è¯¥æ”¾ä»€ä¹ˆ

```typescript
// âŒ åº”è¯¥æ”¾åœ¨ core-features/websocket/lib/
export class WebSocketClient { ... }

// âŒ åº”è¯¥æ”¾åœ¨ core-features/http-client/lib/
export const apiClient = axios.create({ ... })
```

#### é‡è¦å˜åŒ–

âš ï¸ **åœ¨åŒå±‚ Features æ¶æ„ä¸‹ï¼Œ`lib/` çš„å®šä½æ”¹å˜äº†ï¼**

- **ä»¥å‰**ï¼šå­˜æ”¾ç¬¬ä¸‰æ–¹åº“å°è£…ï¼ˆå¦‚ WebSocketã€Axiosï¼‰
- **ç°åœ¨**ï¼šåªå­˜æ”¾çº¯å‡½æ•°å·¥å…·ï¼ˆå¦‚ `cn`ã€`sleep`ã€`retry`ï¼‰
- **åŸå› **ï¼šç¬¬ä¸‰æ–¹åº“å°è£…åº”è¯¥ç§»åˆ° `core-features/` ä¸­ï¼Œä¿æŒæ¨¡å—è‡ªåŒ…å«

---

### 3. `stores/` - å…¨å±€çŠ¶æ€ç®¡ç†

#### âœ… åº”è¯¥æ”¾ä»€ä¹ˆ

**ä»…å­˜æ”¾çœŸæ­£å…¨å±€çš„ã€è·¨å¤šä¸ªä¸šåŠ¡åŠŸèƒ½çš„åº”ç”¨çº§çŠ¶æ€**

```typescript
// âœ… src/stores/appStore.ts - åº”ç”¨çº§å…¨å±€çŠ¶æ€
interface AppState {
  // å½“å‰æ´»åŠ¨çš„ä¸šåŠ¡åŠŸèƒ½
  activeFeature: 'chat' | 'agents' | 'contacts' | 'analytics'
  
  // å…¨å±€åŠ è½½çŠ¶æ€
  isGlobalLoading: boolean
  
  // å…¨å±€é€šçŸ¥
  notifications: Notification[]
  
  // åº”ç”¨å…ƒæ•°æ®
  appVersion: string
  lastUpdated: string
}
```

#### âŒ ä¸åº”è¯¥æ”¾ä»€ä¹ˆ

```typescript
// âŒ åº”è¯¥æ”¾åœ¨ core-features/websocket/stores/
export const useWebSocketStore = create({ ... })

// âŒ åº”è¯¥æ”¾åœ¨ core-features/theme/stores/
export const useThemeStore = create({ ... })

// âŒ åº”è¯¥æ”¾åœ¨ business-features/chat/stores/
export const useChatStore = create({ ... })
```

#### åˆ¤æ–­æ ‡å‡†

**åªæœ‰æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼Œæ‰æ”¾åœ¨å…¨å±€ stores/**ï¼š
1. âœ… å¤šä¸ªä¸šåŠ¡åŠŸèƒ½éƒ½éœ€è¦è®¿é—®
2. âœ… ä¸å±äºä»»ä½•å•ä¸€æ¨¡å—
3. âœ… æ˜¯åº”ç”¨çº§åˆ«çš„çŠ¶æ€
4. âœ… ä¸å…·ä½“ä¸šåŠ¡é€»è¾‘æ— å…³

---

### 4. `types/` - å…¨å±€ç±»å‹å®šä¹‰

#### âœ… åº”è¯¥æ”¾ä»€ä¹ˆ

**ä»…å­˜æ”¾çœŸæ­£é€šç”¨çš„ã€è·¨æ¨¡å—çš„åŸºç¡€ç±»å‹**

```typescript
// âœ… src/types/common.ts - é€šç”¨åŸºç¡€ç±»å‹
export interface Pagination {
  page: number
  pageSize: number
  total: number
}

export interface BaseEntity {
  id: string
  createdAt: string
  updatedAt: string
}

export type Status = 'idle' | 'loading' | 'success' | 'error'

export type Nullable<T> = T | null

// âœ… src/types/env.ts - ç¯å¢ƒå˜é‡ç±»å‹
export interface ImportMetaEnv {
  readonly VITE_API_BASE_URL: string
  readonly VITE_WS_URL: string
  readonly VITE_APP_TITLE: string
}
```

#### âŒ ä¸åº”è¯¥æ”¾ä»€ä¹ˆ

```typescript
// âŒ åº”è¯¥æ”¾åœ¨ core-features/websocket/types/
export interface WebSocketMessage { ... }

// âŒ åº”è¯¥æ”¾åœ¨ business-features/chat/types/
export interface ChatMessage { ... }

// âŒ åº”è¯¥æ”¾åœ¨ core-features/auth/types/
export interface User { ... }
```

#### åˆ¤æ–­æ ‡å‡†

| ç±»å‹ç‰¹å¾ | æ”¾å…¨å±€ types/ | æ”¾æ¨¡å—å†… |
|---------|--------------|----------|
| æ˜¯ TS æ³›å‹å·¥å…·ç±»å‹ï¼Ÿ | âœ… | âŒ |
| æ˜¯é€šç”¨æ•°æ®ç»“æ„ï¼Ÿ | âœ… | âŒ |
| æ˜¯ä¸šåŠ¡å®ä½“ï¼Ÿ | âŒ | âœ… |
| æ˜¯æŠ€æœ¯å®ç°ç›¸å…³ï¼Ÿ | âŒ | âœ… |

---

### 5. `utils/` - å…¨å±€å·¥å…·å‡½æ•°

#### âœ… åº”è¯¥æ”¾ä»€ä¹ˆ

**å­˜æ”¾çº¯å‡½æ•°ã€æ— å‰¯ä½œç”¨ã€é€šç”¨çš„å·¥å…·å‡½æ•°**

```typescript
// âœ… src/utils/format.ts - æ ¼å¼åŒ–å·¥å…·
export const formatCurrency = (amount: number, currency: string = 'CNY'): string => {
  return new Intl.NumberFormat('zh-CN', { style: 'currency', currency }).format(amount)
}

export const truncate = (str: string, maxLength: number): string => {
  return str.length > maxLength ? str.slice(0, maxLength) + '...' : str
}

// âœ… src/utils/validation.ts - éªŒè¯å·¥å…·
export const isEmail = (email: string): boolean => {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  return regex.test(email)
}

// âœ… src/utils/date.ts - æ—¥æœŸå·¥å…·
export const formatDate = (date: Date | string, format: string = 'YYYY-MM-DD'): string => {
  const d = typeof date === 'string' ? new Date(date) : date
  return d.toISOString().split('T')[0]
}

export const getRelativeTime = (date: Date | string): string => {
  const d = typeof date === 'string' ? new Date(date) : date
  const now = new Date()
  const diff = now.getTime() - d.getTime()
  
  const minutes = Math.floor(diff / 60000)
  if (minutes < 60) return `${minutes}åˆ†é’Ÿå‰`
  
  const hours = Math.floor(minutes / 60)
  if (hours < 24) return `${hours}å°æ—¶å‰`
  
  const days = Math.floor(hours / 24)
  return `${days}å¤©å‰`
}

// âœ… src/utils/array.ts - æ•°ç»„å·¥å…·
export const groupBy = <T>(array: T[], key: keyof T): Record<string, T[]> => {
  return array.reduce((acc, item) => {
    const group = String(item[key])
    if (!acc[group]) acc[group] = []
    acc[group].push(item)
    return acc
  }, {} as Record<string, T[]>)
}

export const unique = <T>(array: T[]): T[] => Array.from(new Set(array))

// âœ… src/utils/object.ts - å¯¹è±¡å·¥å…·
export const omit = <T extends object, K extends keyof T>(
  obj: T,
  keys: K[]
): Omit<T, K> => {
  const result = { ...obj }
  keys.forEach(key => delete result[key])
  return result
}
```

#### âŒ ä¸åº”è¯¥æ”¾ä»€ä¹ˆ

```typescript
// âŒ åº”è¯¥æ”¾åœ¨ business-features/chat/utils/
export const formatChatMessage = (message: Message) => { ... }

// âŒ åº”è¯¥æ”¾åœ¨ core-features/websocket/utils/
export const parseWebSocketMessage = (data: string) => { ... }
```

---

### å®é™…æ¡ˆä¾‹å¯¹æ¯”

#### æ¡ˆä¾‹ 1ï¼šWebSocket ç›¸å…³

```typescript
// âŒ é”™è¯¯ï¼šæ”¾åœ¨å…¨å±€ï¼Œå†…å®¹åˆ†æ•£
src/hooks/useWebSocket.ts
src/lib/websocket.ts
src/stores/websocketStore.ts
src/types/websocket.ts
src/utils/websocket-parser.ts

// âœ… æ­£ç¡®ï¼šæ”¾åœ¨æ¨¡å—å†…ï¼Œé«˜å†…èš
src/core-features/websocket/
â”œâ”€â”€ hooks/useWebSocket.ts
â”œâ”€â”€ lib/websocket-client.ts
â”œâ”€â”€ stores/websocketStore.ts
â”œâ”€â”€ types/websocket.ts
â””â”€â”€ utils/message-parser.ts
```

#### æ¡ˆä¾‹ 2ï¼šæ—¥æœŸæ ¼å¼åŒ–

```typescript
// âœ… æ­£ç¡®ï¼šé€šç”¨å·¥å…·ï¼Œæ”¾åœ¨å…¨å±€
src/utils/date.ts
export const formatDate = (date: Date) => { ... }

// âŒ é”™è¯¯ï¼šä¸è¦åœ¨æ¨¡å—å†…é‡å¤å®ç°
src/business-features/chat/utils/date.ts  // âŒ ä¸éœ€è¦
```

#### æ¡ˆä¾‹ 3ï¼šé˜²æŠ– Hook

```typescript
// âœ… æ­£ç¡®ï¼šé€šç”¨ Hookï¼Œæ”¾åœ¨å…¨å±€
src/hooks/useDebounce.ts
export const useDebounce = <T>(value: T, delay: number) => { ... }

// âŒ é”™è¯¯ï¼šä¸è¦åœ¨æ¨¡å—å†…é‡å¤å®ç°
src/business-features/chat/hooks/useDebounce.ts  // âŒ ä¸éœ€è¦
```

---

### å†³ç­–æµç¨‹å›¾

```
éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ Hook/å·¥å…·/çŠ¶æ€/ç±»å‹
          â†“
     æ˜¯å¦æ¶‰åŠç‰¹å®šæŠ€æœ¯ï¼ˆå¦‚ WebSocketã€HTTPã€I18nï¼‰ï¼Ÿ
          â†“
    æ˜¯ â†’ æ”¾åœ¨ core-features/[æŠ€æœ¯å]/
    å¦ â†’ ç»§ç»­åˆ¤æ–­
          â†“
     æ˜¯å¦æ¶‰åŠç‰¹å®šä¸šåŠ¡ï¼ˆå¦‚èŠå¤©ã€Agentsï¼‰ï¼Ÿ
          â†“
    æ˜¯ â†’ æ”¾åœ¨ business-features/[ä¸šåŠ¡å]/
    å¦ â†’ ç»§ç»­åˆ¤æ–­
          â†“
     æ˜¯å¦æ˜¯çº¯å‡½æ•°å·¥å…·ï¼Ÿ
          â†“
    æ˜¯ â†’ æ”¾åœ¨ utils/
    å¦ â†’ ç»§ç»­åˆ¤æ–­
          â†“
     æ˜¯å¦æ˜¯é€šç”¨ React Hookï¼Ÿ
          â†“
    æ˜¯ â†’ æ”¾åœ¨ hooks/
    å¦ â†’ ç»§ç»­åˆ¤æ–­
          â†“
     æ˜¯å¦æ˜¯åº”ç”¨çº§å…¨å±€çŠ¶æ€ï¼Ÿ
          â†“
    æ˜¯ â†’ æ”¾åœ¨ stores/
    å¦ â†’ æ”¾åœ¨ types/ï¼ˆé€šç”¨ç±»å‹ï¼‰
```

---

### æ£€æŸ¥æ¸…å•

**åœ¨å…¨å±€ç›®å½•åˆ›å»ºæ–‡ä»¶å‰ï¼Œé—®è‡ªå·±ï¼š**

- [ ] è¿™ä¸ªåŠŸèƒ½æ˜¯å¦å¯ä»¥ç‹¬ç«‹å‘å¸ƒä¸º npm åŒ…ï¼Ÿï¼ˆå¦‚æœæ˜¯ï¼Œå¯ä»¥æ”¾å…¨å±€ï¼‰
- [ ] è¿™ä¸ªåŠŸèƒ½æ˜¯å¦åœ¨ 3 ä¸ªä»¥ä¸Šçš„æ¨¡å—ä¸­ä½¿ç”¨ï¼Ÿï¼ˆå¦‚æœæ˜¯ï¼Œå¯ä»¥æ”¾å…¨å±€ï¼‰
- [ ] è¿™ä¸ªåŠŸèƒ½æ˜¯å¦å®Œå…¨ä¸æ¶‰åŠä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Ÿï¼ˆå¦‚æœæ˜¯ï¼Œå¯ä»¥æ”¾å…¨å±€ï¼‰
- [ ] è¿™ä¸ªåŠŸèƒ½æ˜¯å¦ä¸ä»»ä½•æŠ€æœ¯å®ç°æ— å…³ï¼Ÿï¼ˆå¦‚æœæ˜¯ï¼Œå¯ä»¥æ”¾å…¨å±€ï¼‰

**å¦‚æœä»¥ä¸Šä»»ä½•ä¸€ä¸ªç­”æ¡ˆæ˜¯"å¦"ï¼Œå°±åº”è¯¥æ”¾åœ¨æ¨¡å—å†…ï¼**

---

### å…¨å±€ç›®å½•è®¾è®¡æ€»ç»“

| ç›®å½• | æ˜¯å¦ä¿ç•™ | å†…å®¹é‡ | å…¸å‹ç”¨é€” |
|------|---------|--------|----------|
| `hooks/` | âœ… ä¿ç•™ | æå°‘ | useDebounce, useLocalStorage, useClickOutside |
| `lib/` | âœ… ä¿ç•™ | æå°‘ | cn, sleep, retry, logger |
| `stores/` | âœ… ä¿ç•™ | æå°‘ | appStoreï¼ˆä»…åº”ç”¨çº§çŠ¶æ€ï¼‰ |
| `types/` | âœ… ä¿ç•™ | æå°‘ | é€šç”¨ç±»å‹ã€ç¯å¢ƒå˜é‡ç±»å‹ |
| `utils/` | âœ… ä¿ç•™ | è¾ƒå°‘ | format, validation, date, array |

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. **æç®€ä¸»ä¹‰**ï¼šå…¨å±€ç›®å½•åº”è¯¥å°½å¯èƒ½å°‘çš„å†…å®¹
2. **æ˜ç¡®è¾¹ç•Œ**ï¼š90% çš„ä»£ç åº”è¯¥åœ¨æ¨¡å—å†…
3. **é¿å…é‡å¤**ï¼šé€šç”¨åŠŸèƒ½æ”¾å…¨å±€ï¼Œç‰¹å®šåŠŸèƒ½æ”¾æ¨¡å—å†…
4. **ä¾¿äºå¤ç”¨**ï¼šå…¨å±€çš„ä¸œè¥¿åº”è¯¥å¯ä»¥è½»æ¾ç§»æ¤åˆ°å…¶ä»–é¡¹ç›®

**è®°ä½ï¼šå½“ä½ çŠ¹è±«æ˜¯å¦æ”¾åœ¨å…¨å±€æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘æ”¾åœ¨æ¨¡å—å†…ï¼**

---

## ğŸ“š ä½¿ç”¨æŒ‡å—

### åŸºç¡€èƒ½åŠ›æ¨¡å—ä½¿ç”¨

```typescript
// å¯¼å…¥å®Œæ•´çš„åŸºç¡€èƒ½åŠ›
import { 
  useWebSocket,           // hooks
  WebSocketStatus,        // components
  websocketStore,         // stores
  WebSocketClient,        // lib
  WebSocketMessage        // types
} from '@/core-features/websocket'

// åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸­ä½¿ç”¨
export const ChatComponent = () => {
  const { isConnected, sendMessage } = useWebSocket()
  
  return (
    <div>
      <WebSocketStatus />
      {isConnected && <ChatArea />}
    </div>
  )
}
```

### ä¸šåŠ¡åŠŸèƒ½æ¨¡å—ä½¿ç”¨

```typescript
// å¯¼å…¥å®Œæ•´çš„ä¸šåŠ¡åŠŸèƒ½
import {
  ChatArea,               // components
  useChat,                // hooks
  chatApi,                // api
  useChatStore            // stores
} from '@/business-features/chat'

// åœ¨é¡µé¢ä¸­ä½¿ç”¨
export const ChatPage = () => {
  const { messages, sendMessage } = useChat()
  
  return <ChatArea messages={messages} onSend={sendMessage} />
}
```

### åˆ›å»ºæ–°çš„åŸºç¡€èƒ½åŠ›æ¨¡å—

```bash
# 1. åˆ›å»ºç›®å½•ç»“æ„
mkdir -p src/core-features/[module-name]/{components,hooks,lib,stores,types,utils}

# 2. åˆ›å»º index.ts ç»Ÿä¸€å¯¼å‡º
cat > src/core-features/[module-name]/index.ts << EOF
export * from './components'
export * from './hooks'
export * from './lib'
export * from './stores'
export * from './types'
EOF
```

### åˆ›å»ºæ–°çš„ä¸šåŠ¡åŠŸèƒ½æ¨¡å—

```bash
# 1. åˆ›å»ºç›®å½•ç»“æ„
mkdir -p src/business-features/[feature-name]/{components,hooks,api,stores,types,pages,routes,utils,assets/locales}

# 2. åˆ›å»º index.ts ç»Ÿä¸€å¯¼å‡º
cat > src/business-features/[feature-name]/index.ts << EOF
export * from './components'
export * from './hooks'
export * from './api'
export * from './stores'
export * from './types'
export { [feature-name]Routes } from './routes'
EOF
```

---

## ğŸš€ è¿ç§»è·¯å¾„

### è¿ç§»æ—¶é—´çº¿

| é˜¶æ®µ | æ—¶é—´ | å†…å®¹ | è´Ÿè´£äºº |
|------|------|------|--------|
| **Week 1** | 2025-W1 | åŸºç¡€èƒ½åŠ›æ¨¡å—è¿ç§» | åŸºç¡€è®¾æ–½å›¢é˜Ÿ |
| **Week 2** | 2025-W2 | Chat + Agents è¿ç§» | ä¸šåŠ¡å›¢é˜Ÿ A |
| **Week 3** | 2025-W3 | Contacts + Analytics è¿ç§» | ä¸šåŠ¡å›¢é˜Ÿ B |
| **Week 4** | 2025-W4 | ä¼˜åŒ–ã€æµ‹è¯•ã€æ–‡æ¡£ | å…¨ä½“ |

è¯¦ç»†è¿ç§»æ­¥éª¤è¯·å‚è€ƒï¼š[åŒå±‚Featuresæ¶æ„è¿ç§»æ–¹æ¡ˆ.md](./åŒå±‚Featuresæ¶æ„è¿ç§»æ–¹æ¡ˆ.md)

---

## âœ… æ€»ç»“

### æ¶æ„æ¼”è¿›å†ç¨‹å›é¡¾

```
åˆå§‹çŠ¶æ€ (4.5/10)
    â†“ æ¸©å’Œé‡æ„
åŠŸèƒ½åˆ†ç»„æ¶æ„ (6.5/10)
    â†“ ç ”ç©¶æœ€ä½³å®è·µ
Bulletproof React å¯å‘ (7.9/10)
    â†“ æ€è€ƒåŸºç¡€èƒ½åŠ›åˆ†ç¦»
åŒå±‚ Features æ¶æ„ (9.1/10) â­
```

### æœ€ç»ˆæ¶æ„çš„æ ¸å¿ƒä»·å€¼

1. **é«˜å†…èš**ï¼šæ¯ä¸ªæ¨¡å—çš„æ‰€æœ‰ä»£ç éƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸‹
2. **èŒè´£æ¸…æ™°**ï¼šåŸºç¡€èƒ½åŠ› vs ä¸šåŠ¡åŠŸèƒ½æ˜ç¡®åˆ†ç¦»
3. **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹åŠŸèƒ½åªéœ€åœ¨å¯¹åº”æ¨¡å—å†…æ“ä½œ
4. **ä¾¿äºæ‰©å±•**ï¼šæ–°å¢æ¨¡å—æœ‰æ ‡å‡†åŒ–çš„ç»“æ„
5. **å›¢é˜Ÿåä½œ**ï¼šåŸºç¡€è®¾æ–½å›¢é˜Ÿå’Œä¸šåŠ¡å›¢é˜ŸèŒè´£åˆ†æ˜

### é¢„æœŸæ”¶ç›Š

| æ”¶ç›Šé¡¹ | é¢„æœŸæå‡ |
|--------|---------|
| å¼€å‘æ•ˆç‡ | +35% |
| ä»£ç è´¨é‡ | +30% |
| å›¢é˜Ÿåä½œ | +45% |
| ç»´æŠ¤æˆæœ¬ | -40% |
| æ‰©å±•èƒ½åŠ› | +50% |

---

## ğŸ“„ æ–‡æ¡£ä¿®è®¢å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®è®¢å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| v1.0 | 2025-10-13 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´æ¶æ„æ¼”è¿›æ–‡æ¡£ | IM Agents Web å›¢é˜Ÿ |
| v1.1 | 2025-10-13 | æ–°å¢å…¨å±€ç›®å½•èŒè´£è¯´æ˜ç« èŠ‚ | IM Agents Web å›¢é˜Ÿ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-13  
**æœ€åæ›´æ–°**: 2025-10-13  
**ç»´æŠ¤å›¢é˜Ÿ**: IM Agents Web å‰ç«¯å›¢é˜Ÿ
