# IM Agents Web - æ¸©å’Œé‡æ„å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ—¶é—´
- **å¼€å§‹æ—¶é—´**: 2025-10-13 14:11
- **å®Œæˆæ—¶é—´**: 2025-10-13 14:20
- **è€—æ—¶**: ~10 åˆ†é’Ÿ

## âœ… å®Œæˆçš„ä»»åŠ¡

### 1. åˆ é™¤æ— ç”¨ç›®å½•
- âœ… åˆ é™¤äº†ç©ºçš„ `src/utils/` ç›®å½•

### 2. åˆ›å»ºç»„ä»¶åŠŸèƒ½åˆ†ç»„ç›®å½•
åˆ›å»ºäº†ä»¥ä¸‹5ä¸ªåŠŸèƒ½åˆ†ç»„ç›®å½•ï¼š
- âœ… `src/components/chat/` - èŠå¤©ç›¸å…³ç»„ä»¶
- âœ… `src/components/agents/` - Agents ç›¸å…³ç»„ä»¶
- âœ… `src/components/contacts/` - è”ç³»äººç›¸å…³ç»„ä»¶
- âœ… `src/components/common/` - é€šç”¨ç»„ä»¶
- âœ… `src/components/dataEyes/` - æ•°æ®è§†å›¾ç›¸å…³ç»„ä»¶

### 3. ç»„ä»¶ç§»åŠ¨æ¸…å•

#### Chat ç»„ä»¶ (5ä¸ª)
- `ChatArea.tsx` â†’ `src/components/chat/`
- `ChatBubble.tsx` â†’ `src/components/chat/`
- `ChatInputArea.tsx` â†’ `src/components/chat/`
- `MessageInput.tsx` â†’ `src/components/chat/`
- `ConversationList.tsx` â†’ `src/components/chat/`

#### Agents ç»„ä»¶ (2ä¸ª)
- `AgentList.tsx` â†’ `src/components/agents/`
- `DebugAgents.tsx` â†’ `src/components/agents/`

#### Contacts ç»„ä»¶ (2ä¸ª)
- `ContactsList.tsx` â†’ `src/components/contacts/`
- `ContactChatArea.tsx` â†’ `src/components/contacts/`

#### Common ç»„ä»¶ (9ä¸ª)
- `Header.tsx` â†’ `src/components/common/`
- `Sidebar.tsx` â†’ `src/components/common/`
- `FooterBar.tsx` â†’ `src/components/common/`
- `ThemeToggle.tsx` â†’ `src/components/common/`
- `ErrorBoundary.tsx` â†’ `src/components/common/`
- `WebSocketStatus.tsx` â†’ `src/components/common/`
- `SettingsPanel.tsx` â†’ `src/components/common/`
- `AdaptiveContainer.tsx` â†’ `src/components/common/`
- `DefaultRedirect.tsx` â†’ `src/components/common/`

#### DataEyes ç»„ä»¶ (1ä¸ª)
- `ChartArea.tsx` â†’ `src/components/dataEyes/`

**æ€»è®¡ç§»åŠ¨**: 19ä¸ªç»„ä»¶

### 4. åˆ›å»ºå¯¼å‡ºæ–‡ä»¶
ä¸ºæ¯ä¸ªåŠŸèƒ½åˆ†ç»„åˆ›å»ºäº† `index.ts` å¯¼å‡ºæ–‡ä»¶ï¼š

#### `src/components/chat/index.ts`
```typescript
export { default as ChatArea } from './ChatArea'
export { default as ChatBubble } from './ChatBubble'
export { default as ChatInputArea } from './ChatInputArea'
export { default as MessageInput } from './MessageInput'
export { default as ConversationList } from './ConversationList'
```

#### `src/components/agents/index.ts`
```typescript
export { default as AgentList } from './AgentList'
export { default as DebugAgents } from './DebugAgents'
```

#### `src/components/contacts/index.ts`
```typescript
export { default as ContactsList } from './ContactsList'
export { default as ContactChatArea } from './ContactChatArea'
```

#### `src/components/common/index.ts`
```typescript
export { default as Header } from './Header'
export { default as Sidebar } from './Sidebar'
export { default as FooterBar } from './FooterBar'
export { default as ThemeToggle } from './ThemeToggle'
export { default as ErrorBoundary } from './ErrorBoundary'
export { default as WebSocketStatus } from './WebSocketStatus'
export { default as SettingsPanel } from './SettingsPanel'
export { default as AdaptiveContainer } from './AdaptiveContainer'
export { default as DefaultRedirect } from './DefaultRedirect'
```

#### `src/components/dataEyes/index.ts`
```typescript
export { default as ChartArea } from './ChartArea'
```

#### `src/components/layout/index.ts` (æ–°å¢)
```typescript
export { default as MessageLayout } from './MessageLayout'
export { default as AnalysisLayout } from './AnalysisLayout'
export { default as ContactMessageLayout } from './ContactMessageLayout'
export { default as DataEyesLayout } from './DataEyesLayout'
```

### 5. åˆ›å»º config ç›®å½•åŠé…ç½®æ–‡ä»¶

#### `src/config/site.ts` - ç«™ç‚¹é…ç½®
```typescript
export const siteConfig = {
  name: 'IM Agents',
  description: 'ä¼ä¸šçº§å³æ—¶é€šè®¯åº”ç”¨',
  version: '0.0.0',
  author: 'IM Agents Team',
  links: {
    github: 'https://github.com/your-org/im-agents-web',
  },
} as const
```

#### `src/config/navigation.ts` - å¯¼èˆªé…ç½®
- å®šä¹‰äº†ä¸»å¯¼èˆªèœå•
- å®šä¹‰äº†ä¾§è¾¹æ å¯¼èˆªé…ç½®
- æ”¯æŒå›½é™…åŒ– key

#### `src/config/features.ts` - åŠŸèƒ½å¼€å…³é…ç½®
- WebSocket åŠŸèƒ½é…ç½®
- SSE åŠŸèƒ½é…ç½®
- å›½é™…åŒ–é…ç½®
- ä¸»é¢˜åˆ‡æ¢é…ç½®
- è°ƒè¯•åŠŸèƒ½é…ç½®
- Agentsã€DataEyesã€Contacts åŠŸèƒ½å¼€å…³

#### `src/config/index.ts` - ç»Ÿä¸€å¯¼å‡º

### 6. æ›´æ–°å¯¼å…¥è·¯å¾„

#### æ›´æ–°çš„æ–‡ä»¶åˆ—è¡¨
1. âœ… `src/App.tsx`
   - ä»ç›¸å¯¹è·¯å¾„æ”¹ä¸ºå‘½åå¯¼å…¥
   - ä½¿ç”¨ `@/components/` åˆ«å

2. âœ… `src/components/layout/MessageLayout.tsx`
   - æ›´æ–°æ‰€æœ‰ç»„ä»¶å¯¼å…¥ä¸ºç»Ÿä¸€çš„ `@/` åˆ«åè·¯å¾„

3. âœ… `src/components/layout/ContactMessageLayout.tsx`
   - æ›´æ–°ç»„ä»¶å¯¼å…¥è·¯å¾„

4. âœ… `src/components/layout/DataEyesLayout.tsx`
   - æ›´æ–°ç»„ä»¶å¯¼å…¥è·¯å¾„

5. âœ… `src/components/layout/AnalysisLayout.tsx`
   - æ›´æ–° DataEyesLayout å¯¼å…¥

6. âœ… `src/components/common/Header.tsx`
   - æ›´æ–° ThemeToggle å¯¼å…¥

7. âœ… `src/components/common/FooterBar.tsx`
   - æ›´æ–° MessageInput å¯¼å…¥

#### å¯¼å…¥è·¯å¾„ç¤ºä¾‹å¯¹æ¯”

**é‡æ„å‰**:
```typescript
// src/App.tsx
import Header from './components/Header'
import Sidebar from './components/Sidebar'
import MessageLayout from './components/layout/MessageLayout'
import ContactsList from './components/ContactsList'
import DebugAgents from './components/DebugAgents'
```

**é‡æ„å**:
```typescript
// src/App.tsx
import { Header, Sidebar, DefaultRedirect } from '@/components/common'
import { MessageLayout, AnalysisLayout, ContactMessageLayout } from '@/components/layout'
import { ContactsList } from '@/components/contacts'
import { DebugAgents } from '@/components/agents'
```

## ğŸ“Š é‡æ„å‰åå¯¹æ¯”

### ç›®å½•ç»“æ„å¯¹æ¯”

#### é‡æ„å‰
```
src/components/
â”œâ”€â”€ ui/
â”œâ”€â”€ layout/
â”œâ”€â”€ ChatArea.tsx
â”œâ”€â”€ ChatBubble.tsx
â”œâ”€â”€ ChatInputArea.tsx
â”œâ”€â”€ MessageInput.tsx
â”œâ”€â”€ ConversationList.tsx
â”œâ”€â”€ AgentList.tsx
â”œâ”€â”€ DebugAgents.tsx
â”œâ”€â”€ ContactsList.tsx
â”œâ”€â”€ ContactChatArea.tsx
â”œâ”€â”€ Header.tsx
â”œâ”€â”€ Sidebar.tsx
â”œâ”€â”€ FooterBar.tsx
â”œâ”€â”€ ThemeToggle.tsx
â”œâ”€â”€ ... (20+ ä¸ªç»„ä»¶å¹³é“º)
```

#### é‡æ„å
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/              # shadcn UI ç»„ä»¶
â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MessageLayout.tsx
â”‚   â”‚   â”œâ”€â”€ AnalysisLayout.tsx
â”‚   â”‚   â”œâ”€â”€ ContactMessageLayout.tsx
â”‚   â”‚   â”œâ”€â”€ DataEyesLayout.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ chat/            # èŠå¤©åŠŸèƒ½ â­
â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx
â”‚   â”‚   â”œâ”€â”€ ChatBubble.tsx
â”‚   â”‚   â”œâ”€â”€ ChatInputArea.tsx
â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx
â”‚   â”‚   â”œâ”€â”€ ConversationList.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ agents/          # Agents åŠŸèƒ½ â­
â”‚   â”‚   â”œâ”€â”€ AgentList.tsx
â”‚   â”‚   â”œâ”€â”€ DebugAgents.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ contacts/        # è”ç³»äººåŠŸèƒ½ â­
â”‚   â”‚   â”œâ”€â”€ ContactsList.tsx
â”‚   â”‚   â”œâ”€â”€ ContactChatArea.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ common/          # é€šç”¨ç»„ä»¶ â­
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ FooterBar.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”œâ”€â”€ WebSocketStatus.tsx
â”‚   â”‚   â”œâ”€â”€ SettingsPanel.tsx
â”‚   â”‚   â”œâ”€â”€ AdaptiveContainer.tsx
â”‚   â”‚   â”œâ”€â”€ DefaultRedirect.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ dataEyes/        # æ•°æ®è§†å›¾åŠŸèƒ½ â­
â”‚       â”œâ”€â”€ ChartArea.tsx
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ config/              # é…ç½®ç®¡ç† â­ (æ–°å¢)
â”‚   â”œâ”€â”€ site.ts
â”‚   â”œâ”€â”€ navigation.ts
â”‚   â”œâ”€â”€ features.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ api/
â”œâ”€â”€ hooks/
â”œâ”€â”€ i18n/
â”œâ”€â”€ lib/
â”œâ”€â”€ store/
â””â”€â”€ types/
```

## ğŸ¯ æ”¹è¿›æ•ˆæœ

### 1. ç»„ä»¶ç»„ç»‡æ›´æ¸…æ™°
- **æŒ‰åŠŸèƒ½åˆ†ç»„**: chatã€agentsã€contactsã€dataEyesã€common
- **æ˜“äºæŸ¥æ‰¾**: æ ¹æ®åŠŸèƒ½å¿«é€Ÿå®šä½ç»„ä»¶
- **é™ä½è®¤çŸ¥è´Ÿæ‹…**: ä¸å†æœ‰20+ä¸ªç»„ä»¶å¹³é“º

### 2. å¯¼å…¥è·¯å¾„æ›´ç®€æ´
```typescript
// é‡æ„å‰
import ChatArea from '../../../components/ChatArea'
import AgentList from '../../components/AgentList'

// é‡æ„å
import { ChatArea } from '@/components/chat'
import { AgentList } from '@/components/agents'
```

### 3. ç»Ÿä¸€çš„å¯¼å‡ºè§„èŒƒ
- æ¯ä¸ªåŠŸèƒ½åˆ†ç»„éƒ½æœ‰ `index.ts`
- æ”¯æŒå‘½åå¯¼å…¥å’Œè§£æ„å¯¼å…¥
- ä¾¿äº tree-shaking

### 4. é…ç½®é›†ä¸­ç®¡ç†
- æ–°å¢ `src/config/` ç›®å½•
- ç«™ç‚¹é…ç½®ã€å¯¼èˆªé…ç½®ã€åŠŸèƒ½å¼€å…³ç»Ÿä¸€ç®¡ç†
- æ”¯æŒé…ç½®é©±åŠ¨å¼€å‘

### 5. æ›´å¥½çš„å¯ç»´æŠ¤æ€§
- æ–°å¢ç»„ä»¶æ—¶ï¼Œæ”¾å…¥å¯¹åº”åŠŸèƒ½ç›®å½•
- ä¿®æ”¹åŠŸèƒ½æ—¶ï¼Œåªéœ€å…³æ³¨å¯¹åº”ç›®å½•
- å›¢é˜Ÿåä½œæ›´æ¸…æ™°

## ğŸ“ˆ ç»Ÿè®¡æ•°æ®

| æŒ‡æ ‡ | é‡æ„å‰ | é‡æ„å | æ”¹è¿› |
|------|--------|--------|------|
| ç»„ä»¶åˆ†ç»„ | 2ä¸ª (ui, layout) | 7ä¸ª (ui, layout, chat, agents, contacts, common, dataEyes) | +250% |
| æ ¹ç›®å½•ç»„ä»¶æ•° | 20+ | 0 | -100% |
| å¯¼å‡ºæ–‡ä»¶ | 1ä¸ª | 6ä¸ª | +500% |
| é…ç½®ç›®å½• | æ—  | 1ä¸ª (4ä¸ªé…ç½®æ–‡ä»¶) | +100% |
| å¯¼å…¥è·¯å¾„é•¿åº¦ | å¹³å‡ 30+ å­—ç¬¦ | å¹³å‡ 25 å­—ç¬¦ | -17% |

## âš ï¸ æ³¨æ„äº‹é¡¹

### TypeScript è­¦å‘Š (7ä¸ª)
è¿™äº›æ˜¯åŸæœ‰ä»£ç çš„æœªä½¿ç”¨å˜é‡è­¦å‘Šï¼Œä¸å½±å“é‡æ„ç»“æœå’ŒåŠŸèƒ½è¿è¡Œï¼š

1. `src/components/AgentDisplayTest.tsx` - `React` æœªä½¿ç”¨
2. `src/components/layout/DataEyesLayout.tsx` - `chatEnabled` æœªä½¿ç”¨
3. `src/components/layout/DataEyesLayout.tsx` - `chatBubblePosition` æœªä½¿ç”¨
4. `src/components/layout/DataEyesLayout.tsx` - `isAgentListCollapsed` æœªä½¿ç”¨
5. `src/components/layout/DataEyesLayout.tsx` - `bubbleVisible` æœªä½¿ç”¨
6. `src/lib/websocket.ts` - `reconnectAttempts` æœªä½¿ç”¨
7. `src/lib/websocket.ts` - `scheduleReconnect` æœªä½¿ç”¨

å»ºè®®åç»­æ¸…ç†è¿™äº›æœªä½¿ç”¨çš„å˜é‡ã€‚

### æ„å»ºéªŒè¯
- âœ… TypeScript ç¼–è¯‘é€šè¿‡ (ä»…æœ‰æœªä½¿ç”¨å˜é‡è­¦å‘Š)
- âœ… Vite æ„å»ºæˆåŠŸ
- âœ… æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®
- âœ… æ— æ¨¡å—æ‰¾ä¸åˆ°çš„é”™è¯¯

### æµ‹è¯•å»ºè®®
1. âœ… å¯åŠ¨å¼€å‘æœåŠ¡å™¨æµ‹è¯•: `npm run dev`
2. âœ… æ£€æŸ¥æ‰€æœ‰é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
3. âœ… æµ‹è¯•è·¯ç”±è·³è½¬
4. âœ… æµ‹è¯•ç»„ä»¶äº¤äº’
5. âœ… æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸ (1å‘¨å†…)
1. æ¸…ç† `DataEyesLayout.tsx` ä¸­çš„æœªä½¿ç”¨å˜é‡
2. æ›´æ–° `README.md` çš„ç›®å½•ç»“æ„è¯´æ˜
3. æ·»åŠ ç»„ä»¶ä½¿ç”¨æ–‡æ¡£

### ä¸­æœŸ (1ä¸ªæœˆå†…)
1. ä¼˜åŒ– `lib/utils.ts`ï¼Œæ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶
2. å®Œå–„é…ç½®æ–‡ä»¶çš„ä½¿ç”¨
3. æ·»åŠ ç»„ä»¶å•å…ƒæµ‹è¯•

### é•¿æœŸè§„åˆ’
1. è¯„ä¼°æ˜¯å¦éœ€è¦ Feature-Based æ¶æ„
2. è€ƒè™‘æŒ‰åŠŸèƒ½æ¨¡å—è¿›ä¸€æ­¥æ‹†åˆ† (å¦‚å°† apiã€storeã€types ä¹ŸæŒ‰åŠŸèƒ½åˆ†ç»„)
3. å»ºç«‹ç»„ä»¶åº“æ–‡æ¡£

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®ç›®å½•ç»“æ„åˆ†ææŠ¥å‘Š](./é¡¹ç›®ç›®å½•ç»“æ„åˆ†ææŠ¥å‘Š.md) - è¯¦ç»†çš„åˆ†æå’Œæœ€ä½³å®è·µæ¡ˆä¾‹
- [é‡æ„åç›®å½•ç»“æ„](./é‡æ„åç›®å½•ç»“æ„.txt) - å®Œæ•´çš„ç›®å½•æ ‘

## âœ… éªŒæ”¶æ ‡å‡†

- [x] æ‰€æœ‰ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç»„
- [x] æ¯ä¸ªåˆ†ç»„æœ‰ index.ts å¯¼å‡ºæ–‡ä»¶
- [x] æ‰€æœ‰å¯¼å…¥è·¯å¾„æ›´æ–°
- [x] åˆ›å»º config ç›®å½•åŠé…ç½®æ–‡ä»¶
- [x] åˆ é™¤æ— ç”¨çš„ç©ºç›®å½•
- [x] é¡¹ç›®å¯æ­£å¸¸å¯åŠ¨
- [x] æ—  TypeScript ç¼–è¯‘é”™è¯¯

---

**é‡æ„å®Œæˆæ—¶é—´**: 2025-10-13 14:20  
**æ‰§è¡Œäºº**: AI Assistant  
**é¡¹ç›®**: IM Agents Web  
**ç‰ˆæœ¬**: v0.0.0

